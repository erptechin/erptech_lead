import{a as i,j as e,C as $,B as c,k as ae,l as te,n as B,o as h,p as se,q as y,U as pe,e as F,A as he,J as ye,s as ge,u as fe,f as be,h as ke,t as je,S as ve,I as Ne,v as _e}from"./index-B2k9pfZk.js";import{u as we,o as Ce}from"./index.esm-BXSyao0E.js";import{F as A,a as Se,b as De,S as Fe,D as Z}from"./dynamicForms-C9EOtqmi.js";import{P as Ae}from"./Page-CCHEMddj.js";import{d as K,u as Te,b as Oe,c as Ee}from"./useApiHook-DHiNo7ZP.js";import{z as w,F as g}from"./transition-Bh1CNPWN.js";import{y as T,j as O}from"./iconBase-CSG8BpD0.js";import{F as Le}from"./DocumentPlusIcon-V55TXDvU.js";import{H as Me,G as Ue,U as ze,K as Re,j as Ie}from"./combobox-DF61dvJh.js";import"./ConfirmModal-CaWwfOVJ.js";import"./Datepicker-aJ53FPpm.js";import"./label-COOQuZHl.js";import"./useMutation-ZLTg2bpF.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-D-DoasAA.js";import"./hidden-DOFjoTxR.js";import"./use-by-comparator-ATwvQGZR.js";import"./calculate-active-index-B3JD3Z-f.js";import"./frozen-Bfzg8UPm.js";function $e({title:m,titleId:t,...f},b){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":t},f),m?i.createElement("title",{id:t},m):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Be=i.forwardRef($e);function He({title:m,titleId:t,...f},b){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":t},f),m?i.createElement("title",{id:t},m):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const re=i.forwardRef(He);function Pe({id:m,data:t,setValue:f,refetchData:b}){var j;const[k,l]=i.useState(!1),[a,u]=i.useState({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]}),o=K(n=>{n&&k&&(l(!1),b())}),C=()=>{if(a.description&&a.description.trim()&&a.next_date){const n=(t==null?void 0:t.custom_followup_history)||[],p=[...n,{...a,idx:n.length+1}];o.mutate({doctype:"Lead",body:{id:m,custom_followup_history:p,custom_next_follow_up_date:a.next_date,custom_lead_status:"Call Back"}}),f("custom_followup_history",p),u({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})}};return m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx($,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Follow-up History Records"}),e.jsxs(c,{onClick:()=>l(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(re,{className:"size-4"}),"Add New Record"]})]}),t!=null&&t.custom_followup_history&&((j=t==null?void 0:t.custom_followup_history)==null?void 0:j.length)>0?e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(ae,{hoverable:!0,className:"w-full min-w-[600px] text-left rtl:text-right",children:[e.jsx(te,{children:e.jsxs(B,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Created Date"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Description"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Next Follow-up Date"})]})}),e.jsx(se,{children:t==null?void 0:t.custom_followup_history.map((n,p)=>e.jsxs(B,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:p+1}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:n.created_date?new Date(n.created_date).toLocaleDateString():"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:n.description||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:n.next_date?new Date(n.next_date).toLocaleDateString():"-"})]},p))})]})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No follow-up records yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(w,{appear:!0,show:k,as:T,onClose:()=>l(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:O,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Follow-up History"}),e.jsx("button",{onClick:()=>l(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(A,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a.description,onChange:n=>u({...a,description:n.target.value}),placeholder:"Enter follow-up description...",rows:"4",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Created Date"}),e.jsx("input",{type:"date",value:a.created_date,onChange:n=>u({...a,created_date:n.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Next Follow-up Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:a.next_date,onChange:n=>u({...a,next_date:n.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(c,{variant:"outlined",onClick:()=>{l(!1),u({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})},children:"Cancel"}),e.jsx(c,{color:"primary",onClick:C,disabled:!a.description||!a.description.trim()||!a.next_date,children:"Add Record"})]})]})})]})]}):null}function Je({id:m,data:t,setValue:f,refetchData:b}){var p;const[k,l]=i.useState(!1),[a,u]=i.useState({document_type:"",file_attachment:"",comments:""}),o=[{label:"Car Mulkiya",value:"Car Mulkiya"},{label:"Driving License",value:"Driving License"},{label:"Emirates ID",value:"Emirates ID"},{label:"Invoice",value:"Invoice"},{label:"Credit Note",value:"Credit Note"},{label:"Debit Note",value:"Debit Note"},{label:"Car Passing",value:"Car Passing"}],C=K(d=>{d&&k&&(l(!1),b())}),j=d=>{const x=new Date(d),E=x.getFullYear(),L=String(x.getMonth()+1).padStart(2,"0"),M=String(x.getDate()).padStart(2,"0"),U=String(x.getHours()).padStart(2,"0"),S=String(x.getMinutes()).padStart(2,"0"),v=String(x.getSeconds()).padStart(2,"0");return`${E}-${L}-${M} ${U}:${S}:${v}`},n=()=>{if(a.document_type&&a.file_attachment){const d=(t==null?void 0:t.cod_documents)||[],x=[...d,{...a,upload_date:j(new Date),idx:d.length+1}];C.mutate({doctype:"Lead",body:{id:m,cod_documents:x}}),f("cod_documents",x),u({document_type:"",file_attachment:"",comments:""})}};return m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx($,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"COD Documents"}),e.jsxs(c,{onClick:()=>l(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(re,{className:"size-4"}),"Add New Record"]})]}),t!=null&&t.cod_documents&&((p=t==null?void 0:t.cod_documents)==null?void 0:p.length)>0?e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(ae,{hoverable:!0,className:"w-full min-w-[700px] text-left rtl:text-right",children:[e.jsx(te,{children:e.jsxs(B,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Document Type"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"File Attachment"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Upload Date"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Status"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Comments"})]})}),e.jsx(se,{children:t==null?void 0:t.cod_documents.map((d,x)=>e.jsxs(B,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:x+1}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.document_type||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.file_attachment?e.jsx("a",{href:d.file_attachment,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline dark:text-blue-400",children:"View File"}):"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.upload_date?new Date(d.upload_date).toLocaleDateString():"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.status||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.comments||"-"})]},x))})]})})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No COD documents yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(w,{appear:!0,show:k,as:T,onClose:()=>l(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:O,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add COD Document"}),e.jsx("button",{onClick:()=>l(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(A,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(Se,{label:e.jsxs(e.Fragment,{children:["Document Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),lists:o,value:a.document_type,onChange:d=>u({...a,document_type:d||""}),placeholder:"Select Document Type"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["File Attachment ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(pe,{onChange:d=>{d&&u({...a,file_attachment:d})},children:({...d})=>e.jsxs(c,{...d,unstyled:!0,className:F("mt-3 w-full shrink-0 flex-col rounded-lg border-2 border-dashed py-10 border-gray-300 dark:border-dark-450"),children:[e.jsx(De,{className:"size-12"}),e.jsxs("span",{className:F("pointer-events-none mt-2 text-gray-600 dark:text-dark-200"),children:[e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:"Browse"}),e.jsx("span",{children:" or drop your files here"})]}),a.file_attachment&&e.jsx("span",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:"File selected"})]})}),a.file_attachment&&e.jsx("div",{className:"mt-2 flex flex-col space-y-4",children:e.jsx("div",{className:"relative inline-block",children:e.jsx(he,{size:24,src:`${ye}${a.file_attachment}`,classNames:{display:"rounded-lg"}})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Comments"}),e.jsx("textarea",{value:a.comments,onChange:d=>u({...a,comments:d.target.value}),placeholder:"Enter comments...",rows:"3",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(c,{variant:"outlined",onClick:()=>{l(!1),u({document_type:"",file_attachment:"",comments:""})},children:"Cancel"}),e.jsx(c,{color:"primary",onClick:n,disabled:!a.document_type||!a.file_attachment,children:"Add Document"})]})]})})]})]}):null}const X="Lead",_="Lead",q=["first_name","email","mobile_no","custom_car_year","custom_car_brand_new","custom_car_make","custom_car_model","custom_car_emirate","custom_car_registration_date","custom_policy_start_date","custom_date_of_birth","custom_license_country","custom_driving_experience","custom_nationality"],W=["custom_lead_status","custom_next_follow_up_date","source","custom_call_back_date","custom_call_back_time","custom_call_back_notes","custom_claims_last_12_months","custom_gcc_specification","custom_current_policy_active","custom_no_claims_years","custom_personal_use_only","custom_policy_fully_comprehensive","custom_followup_history","cod_documents"],ee={ignorFields:{status:!0,custom_followup_history:!0,cod_documents:!0}};function ma(){const{user:{role_profile_name:m}}=ge(),{isDark:t,darkColorScheme:f,lightColorScheme:b}=fe(),k=be(),{id:l}=ke(),{data:a,isFetching:u}=Te({doctype:_,fields:JSON.stringify([...q,...W])}),{data:o,isFetching:C,refetch:j}=Oe({doctype:_,id:l,fields:JSON.stringify([...q,...W])}),n=Ee(r=>{r&&(M(),k(-1))}),p=K(r=>{r&&(M(),k(-1))}),{register:d,handleSubmit:x,formState:{errors:E},control:L,reset:M,setValue:U}=we({resolver:Ce(Fe(a==null?void 0:a.fields,["status"])),values:l?o:{}}),[S,v]=i.useState(!1),[le,z]=i.useState(!1),[oe,D]=i.useState(!1),[Q,H]=i.useState({custom_assigned_user:""}),[R,I]=i.useState(""),[V,de]=i.useState([]),[ne,P]=i.useState(null),G=["Car Mulkiya","Driving License","Emirates ID","Invoice","Credit Note","Debit Note","Car Passing"],J=(()=>{if(!(o!=null&&o.cod_documents)||o.cod_documents.length===0)return!1;const r=o.cod_documents.map(s=>s.document_type).filter(s=>s&&s.trim()!=="");return G.every(s=>r.includes(s))})();i.useEffect(()=>{S&&je({doctype:"User",fields:JSON.stringify(["name","full_name","email"]),filters:JSON.stringify([["role_profile_name","=","Lead Manager"]]),page_length:100}).then(r=>{r!=null&&r.data&&de(r.data.map(s=>({label:s.full_name||s.name,value:s.name,email:s.email})))})},[S]);const Y=R===""?V:V.filter(r=>{var s;return r.label.toLowerCase().replace(/\s+/g,"").includes(R.toLowerCase().replace(/\s+/g,""))||((s=r.email)==null?void 0:s.toLowerCase().includes(R.toLowerCase()))}),ie=()=>{if(l&&J){const r={id:l,custom_assigned_user:Q.custom_assigned_user,custom_lead_status:"CEO Approval"};p.mutate({doctype:_,body:r}),v(!1),H({custom_assigned_user:""}),P(null),I("")}},ce=()=>{D(!0)},me=()=>{if(l){const r={id:l,custom_lead_status:"Approved"};p.mutate({doctype:_,body:r},{onSuccess:()=>{D(!1),z(!0),j()}})}},xe=r=>{const s={...r,status:l?r.status:"Open"};l?p.mutate({doctype:_,body:{...s,id:l}}):n.mutate({doctype:_,body:s})};return u||C?e.jsx(ve,{style:{"--sk-color":t?f[700]:b[300]}}):e.jsx(Ae,{title:(l?"Edit ":"New ")+X,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[l?"Edit":"New"," ",X]})]}),e.jsxs("div",{className:"flex gap-2",children:[l&&m==="Lead Manager"&&(o==null?void 0:o.custom_lead_status)==="CEO Approval"&&e.jsx(c,{className:"min-w-[7rem]",variant:"outlined",color:"primary",onClick:ce,children:"Make Approved"}),l&&m==="Lead User"&&(o==null?void 0:o.custom_lead_status)!=="Approved"&&e.jsx(c,{className:"min-w-[7rem]",variant:"outlined",color:"primary",onClick:()=>v(!0),disabled:(o==null?void 0:o.custom_lead_status)==="CEO Approval",children:(o==null?void 0:o.custom_lead_status)==="CEO Approval"?"Waiting For Approval":" Submit For CEO Approval"}),e.jsx(c,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>k(-1),children:"Back"}),e.jsx(c,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsx("form",{autoComplete:"off",onSubmit:x(xe),id:"new-post-form",children:e.jsxs("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:[e.jsx(Je,{id:l,data:o,setValue:U,refetchData:j}),e.jsx(Pe,{id:l,data:o,setValue:U,refetchData:j}),e.jsx("div",{className:"col-span-12 lg:col-span-7",children:e.jsx($,{className:"p-4 sm:px-5",children:e.jsx("div",{className:"mt-5 space-y-5",children:e.jsx(Z,{infos:a,fields:q,register:d,tables:ee,control:L,errors:E})})})}),e.jsx("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-5 lg:space-y-6",children:e.jsx($,{className:"p-4 sm:px-5",children:e.jsx(Z,{infos:a,tables:ee,fields:W,register:d,control:L,errors:E})})})]})}),e.jsxs(w,{appear:!0,show:S,as:T,onClose:()=>v(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:O,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Submit For CEO Approval"}),e.jsx("button",{onClick:()=>v(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(A,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Assign User"}),e.jsx(Me,{value:ne,onChange:r=>{P(r),H({...Q,custom_assigned_user:(r==null?void 0:r.value)||""})},children:({open:r})=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative w-full cursor-pointer overflow-hidden",children:e.jsx(Ue,{as:Ne,autoComplete:"off",displayValue:s=>(s==null?void 0:s.label)||"",onChange:s=>I(s.target.value),placeholder:"Select User",suffix:e.jsx(ze,{children:e.jsx(_e,{className:F("size-5 transition-transform",r&&"rotate-180"),"aria-hidden":"true"})})})}),e.jsx(w,{as:"div",enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",afterLeave:()=>I(""),children:e.jsx(Re,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-y-auto overflow-x-hidden rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-750 dark:shadow-none",children:Y.length===0&&R!==""?e.jsx("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-800 dark:text-dark-100",children:"Nothing found"}):Y.map(s=>e.jsx(Ie,{className:({selected:N,active:ue})=>F("relative cursor-pointer select-none px-4 py-2 outline-hidden transition-colors",ue&&!N&&"bg-gray-100 dark:bg-dark-600",N?"bg-primary-600 text-white dark:bg-primary-500":"text-gray-800 dark:text-dark-100"),value:s,children:({selected:N})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:s.label}),s.email&&e.jsx("span",{className:F("text-xs",N?"text-primary-100":"text-gray-500 dark:text-dark-300"),children:s.email})]})},s.value))})})]})})]}),!J&&e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-200 p-3 dark:bg-yellow-900/20 dark:border-yellow-800",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Warning:"})," All required document types must be uploaded before submitting for CEO approval."]}),e.jsxs("p",{className:"text-xs mt-1 text-yellow-700 dark:text-yellow-300",children:["Missing: ",G.filter(r=>{var s;return!((s=o==null?void 0:o.cod_documents)!=null&&s.some(N=>N.document_type===r))}).join(", ")]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(c,{variant:"outlined",onClick:()=>{v(!1),H({custom_assigned_user:""}),P(null),I("")},children:"Cancel"}),e.jsx(c,{color:"primary",onClick:ie,disabled:!J,children:"Submit For Approval"})]})]})})]}),e.jsxs(w,{appear:!0,show:oe,as:T,onClose:()=>D(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:O,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-md flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Confirm Approval"}),e.jsx("button",{onClick:()=>D(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(A,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-base text-gray-700 dark:text-dark-200",children:"Are you sure you want to approve this lead?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:'This action will change the lead status to "Approved".'})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(c,{variant:"outlined",onClick:()=>D(!1),children:"No"}),e.jsx(c,{color:"primary",onClick:me,children:"Yes"})]})]})})]}),e.jsxs(w,{appear:!0,show:le,as:T,onClose:()=>z(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:O,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-md flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Success"}),e.jsx("button",{onClick:()=>z(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(A,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx(Be,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Lead Approved Successfully"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-dark-300",children:'The lead status has been updated to "Approved".'})]})]})}),e.jsx("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:e.jsx(c,{color:"primary",onClick:()=>{z(!1),j()},children:"OK"})})]})})]})]})})}export{ma as default};
