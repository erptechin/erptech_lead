import{a as d,e as g,f as u,h as w,j as e,C as x,A as p,k as j,P as m,l as f,B as S,F as C,n as F,o as D}from"./index-ylOuoFxF.js";import{P as T}from"./Page-C6Mv6ijq.js";import{u as k,a as b}from"./useApiHook-ClG7Ftbp.js";import{F as z}from"./ChevronRightIcon-uyqndbLZ.js";import{r as E,I as L,g as A,E as M}from"./menu-Cx3y6S7F.js";import{z as R}from"./transition-w97hCQTV.js";import"./useMutation-GhgxFWjH.js";import"./use-text-value-cHRkNIUB.js";import"./calculate-active-index-CG5pMfGd.js";import"./use-tree-walker-BYfZtfoV.js";import"./label-D5RvHU6n.js";import"./floating-ui.dom-CtcSe9Ld.js";function H({title:i,titleId:s,...l},t){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),i?d.createElement("title",{id:s},i):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const O=d.forwardRef(H);function V({title:i,titleId:s,...l},t){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),i?d.createElement("title",{id:s},i):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const h=d.forwardRef(V);function _(){const{isAuthenticated:i}=g(),{data:s,isLoading:l}=u({queryKey:["statistics"],queryFn:()=>w(),enabled:i}),t={leads:(s==null?void 0:s.leads)??0,customers:(s==null?void 0:s.leadManagers)??0,leadUsers:(s==null?void 0:s.leadUsers)??0,salesOrders:(s==null?void 0:s.salesOrders)??0};return e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 sm:gap-5 lg:gap-6",children:[e.jsx(x,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:l?"...":t.leads}),e.jsx("p",{className:"truncate text-xs-plus",children:"Leads"})]}),e.jsx(p,{size:10,initialColor:"primary",classNames:{display:"mask is-star rounded-none"},children:e.jsx(h,{className:"size-5"})})]})}),e.jsx(x,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:l?"...":t.customers}),e.jsx("p",{className:"truncate text-xs-plus",children:"Lead Manager"})]}),e.jsx(p,{size:10,initialColor:"success",classNames:{display:"mask is-star rounded-none"},children:e.jsx(h,{className:"size-5"})})]})}),e.jsx(x,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:l?"...":t.leadUsers}),e.jsx("p",{className:"truncate text-xs-plus",children:"Lead User"})]}),e.jsx(p,{size:10,initialColor:"warning",classNames:{display:"mask is-star rounded-none"},children:e.jsx(h,{className:"size-5"})})]})}),e.jsx(x,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:l?"...":t.salesOrders}),e.jsx("p",{className:"truncate text-xs-plus",children:"Sales Orders"})]}),e.jsx(p,{size:10,initialColor:"info",classNames:{display:"mask is-star rounded-none"},children:e.jsx(O,{className:"size-5"})})]})})]})}function v({id:i,lead_name:s,status:l,source:t,email:c,phone:o,color:r="primary"}){const a=s||i;return e.jsxs(x,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{size:10,name:a,initialColor:"auto"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("p",{className:"truncate font-medium text-gray-800 dark:text-dark-100",children:a})}),e.jsx("div",{className:"mt-0.5 flex text-xs text-gray-400 dark:text-dark-300",children:l&&e.jsx("p",{className:"hidden sm:flex",children:l})})]})]}),t&&e.jsx("p",{className:j(`this:${r}`,"-mt-3 text-end text-xs font-medium text-this dark:text-this-lighter"),children:t})]})}v.propTypes={id:m.string,lead_name:m.string,status:m.string,source:m.string,email:m.string,phone:m.string,color:m.string};const y="Lead",$=["lead_name","status","source","email_id","mobile_no"];function P(){const i=f(),[s,l]=d.useState([]),{data:t}=k({doctype:y,fields:JSON.stringify($)}),[c,o]=d.useState({doctype:y,page:1,page_length:5,fields:null}),{data:r}=b(c);return d.useEffect(()=>{if(t!=null&&t.fields){const a=t==null?void 0:t.fields.map(n=>n.fieldname);o({...c,fields:JSON.stringify([...a,"name"])})}},[t]),d.useEffect(()=>{r!=null&&r.data&&l(r==null?void 0:r.data)},[r]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsx("h2",{className:"truncate text-sm-plus font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Ongoing Leads"}),e.jsx("a",{onClick:()=>i("/sales/leads"),className:"border-b border-dotted border-current pb-0.5 text-xs-plus font-medium text-primary-600 outline-hidden transition-colors duration-300 hover:text-primary-600/70 focus:text-primary-600/70 dark:text-primary-400 dark:hover:text-primary-400/70 dark:focus:text-primary-400/70",children:"View All"})]}),e.jsx("div",{className:"mt-3 space-y-3.5",children:s.map(a=>e.jsx(v,{...a},a.id))})]})}const N="Sales Order",Z=["customer","status","total","delivery_date","po_no"];function U(){const i=f(),[s,l]=d.useState([]),{data:t}=k({doctype:N,fields:JSON.stringify(Z)}),[c,o]=d.useState({doctype:N,page:1,page_length:5,fields:null}),{data:r}=b(c);return d.useEffect(()=>{if(t!=null&&t.fields){const a=t==null?void 0:t.fields.map(n=>n.fieldname);o(n=>({...n,fields:JSON.stringify([...a,"name"])}))}},[t]),d.useEffect(()=>{r!=null&&r.data&&l(r==null?void 0:r.data)},[r]),e.jsxs(x,{className:"px-4 pb-4 sm:px-5",children:[e.jsxs("div",{className:"flex h-14 min-w-0 items-center justify-between py-3",children:[e.jsx("h2",{className:"font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Sales Orders"}),e.jsx(q,{})]}),e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsxs("div",{className:"flex items-center justify-between gap-2",onClick:()=>i(`/sales/sales-order/${a.id}`),style:{cursor:"pointer"},children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[e.jsx(p,{size:10,name:a.customer||a.id,initialColor:"auto"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 ",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-dark-100",children:a.customer||a.id}),a.status&&e.jsx("div",{className:"flex h-4.5 min-w-[1.125rem] items-center justify-center rounded-full bg-gray-200 px-1.5 text-tiny-plus font-medium leading-none text-gray-800 dark:bg-dark-450 dark:text-white",children:a.status})]}),e.jsx("p",{className:"mt-0.5 truncate text-xs text-gray-400 dark:text-dark-300",children:a.total?`Total: ${a.total}`:a.po_no||a.id})]})]}),e.jsx("a",{href:"##",onClick:n=>{n.preventDefault(),i(`/sales/sales-order/${a.id}`)},className:"hover:text-primary-600 focus:text-primary-600 dark:hover:text-primary-400 dark:focus:text-primary-400",children:e.jsx(z,{className:"size-5 ltr:-mr-1 rtl:-ml-1 rtl:rotate-180"})})]},a.id))})]})}function q(){const i=f();return e.jsxs(E,{as:"div",className:"relative inline-block text-left ltr:-mr-1.5 rtl:-ml-1.5",children:[e.jsx(L,{as:S,variant:"flat",isIcon:!0,className:"size-8 rounded-full",children:e.jsx(C,{className:"size-5"})}),e.jsx(R,{as:d.Fragment,enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsx(A,{className:"absolute z-100 mt-1.5 min-w-[10rem] rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-700 dark:shadow-none ltr:right-0 rtl:left-0",children:e.jsx(M,{children:({focus:s})=>e.jsx("button",{onClick:()=>i("/sales/sales-order"),className:j("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",s&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"View All"})})})})})]})}function B(){const{isAuthenticated:i}=g(),[s,l]=d.useState([]),{data:t,isLoading:c}=u({queryKey:["sales-report"],queryFn:()=>F(),enabled:i});d.useEffect(()=>{t&&Array.isArray(t)&&l(t)},[t]);const o=d.useMemo(()=>s.length===0?null:s[0],[s]);return e.jsx(x,{className:"p-4 sm:px-5",children:e.jsx("div",{className:"space-y-4",children:c?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-dark-300",children:"Loading sales data..."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:s.map((r,a)=>{const n=o&&r.name===o.name;return e.jsxs("div",{className:j("relative rounded-lg border p-4 transition-shadow hover:shadow-md","border-gray-200 bg-white dark:border-dark-500 dark:bg-dark-700"),children:[n&&e.jsx("div",{className:"absolute -top-2 -right-2 z-10 flex items-center justify-center bg-yellow-400 rounded-full p-1 shadow-lg",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-900",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V7C19 9.76 16.76 12 14 12H13V16H16C16.55 16 17 16.45 17 17S16.55 18 16 18H8C7.45 18 7 17.55 7 17S7.45 16 8 16H11V12H10C7.24 12 5 9.76 5 7V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V7C7 8.66 8.34 10 10 10H14C15.66 10 17 8.66 17 7V6H7Z"})})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{size:12,src:r.image,alt:r.name,initialColor:"primary",classNames:{display:"rounded-full"}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("h3",{className:"text-base font-semibold text-gray-800 dark:text-dark-50 truncate",children:r.name})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-300 mb-1",children:"Leads"}),e.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:r.leads})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-300 mb-1",children:"Deals"}),e.jsx("p",{className:"text-lg font-bold text-cyan-500 dark:text-cyan-400",children:r.deals})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-dark-500",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-dark-300 mb-1",children:"Total Value"}),e.jsxs("p",{className:"text-lg font-bold text-orange-500 dark:text-orange-400",children:[r.totalValue.toFixed(2)," AED"]})]})]})]})]},r.user_name||a)})}),s.length===0&&!c&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-dark-300",children:"No sales data available"})]})})})}function I(){const{isAuthenticated:i}=g(),{data:s,isLoading:l}=u({queryKey:["sales-target-summary"],queryFn:()=>D(),enabled:i}),t=(s==null?void 0:s.todayDeals)??0,c=(s==null?void 0:s.todayRevenue)??0,o=(s==null?void 0:s.salesTargetData)??[],r=a=>a===0?"0":a>=1e3?`${(a/1e3).toFixed(0)}k`:a.toString();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsx(x,{className:"p-6 bg-blue-600 border-0",children:e.jsxs("div",{className:"text-white",children:[e.jsx("p",{className:"text-4xl font-bold mb-2",children:l?"...":t}),e.jsx("p",{className:"text-sm opacity-90",children:"Today's Deals"})]})}),e.jsx(x,{className:"p-6 bg-orange-500 border-0",children:e.jsxs("div",{className:"text-white",children:[e.jsx("p",{className:"text-4xl font-bold mb-2",children:l?"...":c.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("p",{className:"text-sm opacity-90",children:"Today's Revenue (AED)"})]})})]}),e.jsxs(x,{className:"p-0 overflow-hidden",children:[e.jsx("div",{className:"bg-green-600 px-4 py-3 sm:px-5",children:e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sales Target Summary"})}),e.jsx("div",{className:"overflow-x-auto",children:l?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-dark-300",children:"Loading sales target data..."}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-dark-500 bg-gray-50 dark:bg-dark-800",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-dark-200 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-dark-200 uppercase",children:"Total Deals"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-dark-200 uppercase",children:"Sales Target"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-dark-200 uppercase",children:"Cancellation/Refund (AED)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-dark-200 uppercase",children:"Revenue Mode"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-dark-200 uppercase",children:"Revenue Target"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-dark-500",children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 dark:text-dark-300",children:"No sales data available"})}):o.map((a,n)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 dark:text-dark-100",children:a.name}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-blue-600 dark:text-blue-400",children:a.totalDeals}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-800 dark:text-dark-100",children:a.salesTarget}),e.jsxs("td",{className:"px-4 py-3 text-sm text-green-600 dark:text-green-400",children:[a.cancellation.toFixed(2),"/",a.refund.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-green-600 dark:text-green-400",children:a.revenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("td",{className:"px-4 py-3 text-sm text-green-600 dark:text-green-400",children:r(a.revenueTarget)})]},a.user_name||n))})]})})]})]})}function le(){return e.jsx(T,{title:"Dashboard",children:e.jsx("div",{className:"transition-content px-(--margin-x) pb-8 mt-5 lg:mt-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 sm:gap-5 lg:gap-6",children:[e.jsxs("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-8 lg:space-y-6",children:[e.jsx(_,{}),e.jsx(P,{}),e.jsx(B,{})]}),e.jsx("div",{className:"col-span-12 lg:col-span-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-1 lg:gap-6",children:[e.jsx(U,{}),e.jsx(I,{})]})})]})})})}export{le as default};
