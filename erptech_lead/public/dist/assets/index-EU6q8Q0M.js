import{a,j as e,C as h,A as k,e as u,P as x,f as w,B as C,F as E}from"./index-LumR9LpT.js";import{P as T}from"./Page-DpNZoU2W.js";import{u as N,a as b}from"./useApiHook-BaTdZUfY.js";import{F as _,r as I,C as R}from"./react-apexcharts.min-CmWO3l5K.js";import{r as z,I as F,g as A,E as y}from"./menu-D4F3Xua-.js";import{z as J}from"./transition-Bjlj-wUW.js";import"./Datepicker-DYSyDBji.js";import"./useMutation-DIthQpx-.js";import"./use-text-value-DvuwZjGX.js";import"./calculate-active-index-P522dhW6.js";import"./label-Bynhy_B1.js";import"./floating-ui.dom-CtcSe9Ld.js";function B({title:s,titleId:l,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const P=a.forwardRef(B);function Z({title:s,titleId:l,...i},t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const v=a.forwardRef(Z);function D(){const[s,l]=a.useState({leads:0,customers:0,salesOrders:0}),{data:i}=N({doctype:"Lead",fields:JSON.stringify(["name"])}),{data:t}=N({doctype:"Customer",fields:JSON.stringify(["name"])}),{data:d}=N({doctype:"Sales Order",fields:JSON.stringify(["name"])}),[f,n]=a.useState({doctype:"Lead",page:1,page_length:1,fields:null}),[r,c]=a.useState({doctype:"Customer",page:1,page_length:1,fields:null}),[M,$]=a.useState({doctype:"Sales Order",page:1,page_length:1,fields:null}),{data:p}=b(f),{data:g}=b(r),{data:j}=b(M);return a.useEffect(()=>{if(i!=null&&i.fields){const o=i.fields.map(m=>m.fieldname);n(m=>({...m,fields:JSON.stringify([...o,"name"])}))}},[i]),a.useEffect(()=>{if(t!=null&&t.fields){const o=t.fields.map(m=>m.fieldname);c(m=>({...m,fields:JSON.stringify([...o,"name"])}))}},[t]),a.useEffect(()=>{if(d!=null&&d.fields){const o=d.fields.map(m=>m.fieldname);$(m=>({...m,fields:JSON.stringify([...o,"name"])}))}},[d]),a.useEffect(()=>{(p==null?void 0:p.counts)!==void 0&&l(o=>({...o,leads:p.counts}))},[p]),a.useEffect(()=>{(g==null?void 0:g.counts)!==void 0&&l(o=>({...o,customers:g.counts}))},[g]),a.useEffect(()=>{(j==null?void 0:j.counts)!==void 0&&l(o=>({...o,salesOrders:j.counts}))},[j]),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 sm:gap-5 lg:gap-6",children:[e.jsx(h,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:s.leads}),e.jsx("p",{className:"truncate text-xs-plus",children:"Leads"})]}),e.jsx(k,{size:10,initialColor:"primary",classNames:{display:"mask is-star rounded-none"},children:e.jsx(v,{className:"size-5"})})]})}),e.jsx(h,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:s.customers}),e.jsx("p",{className:"truncate text-xs-plus",children:"Customers"})]}),e.jsx(k,{size:10,initialColor:"success",classNames:{display:"mask is-star rounded-none"},children:e.jsx(v,{className:"size-5"})})]})}),e.jsx(h,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:s.salesOrders}),e.jsx("p",{className:"truncate text-xs-plus",children:"Sales Orders"})]}),e.jsx(k,{size:10,initialColor:"info",classNames:{display:"mask is-star rounded-none"},children:e.jsx(P,{className:"size-5"})})]})})]})}function L({id:s,lead_name:l,company_name:i,status:t,source:d,email:f,phone:n,color:r="primary"}){const c=l||i||s;return e.jsxs(h,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(k,{size:10,name:c,initialColor:"auto"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("p",{className:"truncate font-medium text-gray-800 dark:text-dark-100",children:c})}),e.jsxs("div",{className:"mt-0.5 flex text-xs text-gray-400 dark:text-dark-300",children:[i&&e.jsx("p",{children:i}),t&&e.jsxs(e.Fragment,{children:[i&&e.jsx("div",{className:"mx-2 my-1 hidden w-px bg-gray-200 dark:bg-dark-500 sm:flex"}),e.jsx("p",{className:"hidden sm:flex",children:t})]})]})]})]}),d&&e.jsx("p",{className:u(`this:${r}`,"-mt-3 text-end text-xs font-medium text-this dark:text-this-lighter"),children:d})]})}L.propTypes={id:x.string,lead_name:x.string,company_name:x.string,status:x.string,source:x.string,email:x.string,phone:x.string,color:x.string};const S="Lead",W=["lead_name","status","source","email","phone","company_name"];function H(){const s=w(),[l,i]=a.useState([]),{data:t}=N({doctype:S,fields:JSON.stringify(W)}),[d,f]=a.useState({doctype:S,page:1,page_length:5,fields:null}),{data:n}=b(d);return a.useEffect(()=>{if(t!=null&&t.fields){const r=t==null?void 0:t.fields.map(c=>c.fieldname);f({...d,fields:JSON.stringify([...r,"name"])})}},[t]),a.useEffect(()=>{n!=null&&n.data&&i(n==null?void 0:n.data)},[n]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsx("h2",{className:"truncate text-sm-plus font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Ongoing Leads"}),e.jsx("a",{onClick:()=>s("/dashboards/lead"),className:"border-b border-dotted border-current pb-0.5 text-xs-plus font-medium text-primary-600 outline-hidden transition-colors duration-300 hover:text-primary-600/70 focus:text-primary-600/70 dark:text-primary-400 dark:hover:text-primary-400/70 dark:focus:text-primary-400/70",children:"View All"})]}),e.jsx("div",{className:"mt-3 space-y-3.5",children:l.map(r=>e.jsx(L,{...r},r.id))})]})}const O="Sales Order",V=["customer","status","total","delivery_date","po_no"];function G(){const s=w(),[l,i]=a.useState([]),{data:t}=N({doctype:O,fields:JSON.stringify(V)}),[d,f]=a.useState({doctype:O,page:1,page_length:5,fields:null}),{data:n}=b(d);return a.useEffect(()=>{if(t!=null&&t.fields){const r=t==null?void 0:t.fields.map(c=>c.fieldname);f(c=>({...c,fields:JSON.stringify([...r,"name"])}))}},[t]),a.useEffect(()=>{n!=null&&n.data&&i(n==null?void 0:n.data)},[n]),e.jsxs(h,{className:"px-4 pb-4 sm:px-5",children:[e.jsxs("div",{className:"flex h-14 min-w-0 items-center justify-between py-3",children:[e.jsx("h2",{className:"font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Sales Orders"}),e.jsx(U,{})]}),e.jsx("div",{className:"space-y-4",children:l.map(r=>e.jsxs("div",{className:"flex items-center justify-between gap-2",onClick:()=>s(`/sales/sales-order/${r.id}`),style:{cursor:"pointer"},children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[e.jsx(k,{size:10,name:r.customer||r.id,initialColor:"auto"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 ",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-dark-100",children:r.customer||r.id}),r.status&&e.jsx("div",{className:"flex h-4.5 min-w-[1.125rem] items-center justify-center rounded-full bg-gray-200 px-1.5 text-tiny-plus font-medium leading-none text-gray-800 dark:bg-dark-450 dark:text-white",children:r.status})]}),e.jsx("p",{className:"mt-0.5 truncate text-xs text-gray-400 dark:text-dark-300",children:r.total?`Total: ${r.total}`:r.po_no||r.id})]})]}),e.jsx("a",{href:"##",onClick:c=>{c.preventDefault(),s(`/sales/sales-order/${r.id}`)},className:"hover:text-primary-600 focus:text-primary-600 dark:hover:text-primary-400 dark:focus:text-primary-400",children:e.jsx(_,{className:"size-5 ltr:-mr-1 rtl:-ml-1 rtl:rotate-180"})})]},r.id))})]})}function U(){const s=w();return e.jsxs(z,{as:"div",className:"relative inline-block text-left ltr:-mr-1.5 rtl:-ml-1.5",children:[e.jsx(F,{as:C,variant:"flat",isIcon:!0,className:"size-8 rounded-full",children:e.jsx(E,{className:"size-5"})}),e.jsx(J,{as:a.Fragment,enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsx(A,{className:"absolute z-100 mt-1.5 min-w-[10rem] rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-700 dark:shadow-none ltr:right-0 rtl:left-0",children:e.jsx(y,{children:({focus:l})=>e.jsx("button",{onClick:()=>s("/sales/sales-order"),className:u("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",l&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"View All"})})})})})]})}I();const Y=[{name:"Income",data:[1765,2357,4215,3971,3841,4221,2374,4212]}],q={colors:["#4467EF"],chart:{parentHeightOffset:0,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:8,columnWidth:"55%",dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return s>=1e3?(s/1e3).toFixed(2)+"k":s},offsetY:-30},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug"],position:"top",axisBorder:{show:!1},axisTicks:{show:!1},tooltip:{enabled:!1}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}}};function K(){return e.jsxs(h,{className:"overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 sm:px-5",children:[e.jsx("h2",{className:"truncate text-sm-plus font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Income"}),e.jsx(Q,{})]}),e.jsx("div",{className:"ax-transparent-gridline ltr:pr-2 rtl:pl-2",children:e.jsx(R,{type:"bar",height:"265",options:q,series:Y})})]})}function Q(){return e.jsxs(z,{as:"div",className:"relative inline-block text-left ltr:-mr-1.5 rtl:-ml-1.5",children:[e.jsx(F,{as:C,variant:"flat",isIcon:!0,className:"size-8 rounded-full",children:e.jsx(E,{className:"size-5"})}),e.jsx(J,{as:a.Fragment,enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsxs(A,{className:"absolute z-100 mt-1.5 min-w-[10rem] rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-700 dark:shadow-none ltr:right-0 rtl:left-0",children:[e.jsx(y,{children:({focus:s})=>e.jsx("button",{className:u("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",s&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"Action"})})}),e.jsx(y,{children:({focus:s})=>e.jsx("button",{className:u("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",s&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"Another action"})})}),e.jsx(y,{children:({focus:s})=>e.jsx("button",{className:u("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",s&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"Other action"})})}),e.jsx("hr",{className:"mx-3 my-1.5 h-px border-gray-150 dark:border-dark-500"}),e.jsx(y,{children:({focus:s})=>e.jsx("button",{className:u("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",s&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"Separated action"})})})]})})]})}function me(){return e.jsx(T,{title:"Dashboard",children:e.jsx("div",{className:"transition-content px-(--margin-x) pb-8 mt-5 lg:mt-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 sm:gap-5 lg:gap-6",children:[e.jsxs("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-8 lg:space-y-6",children:[e.jsx(D,{}),e.jsx(H,{})]}),e.jsx("div",{className:"col-span-12 lg:col-span-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-1 lg:gap-6",children:[e.jsx(G,{}),e.jsx(K,{})]})})]})})})}export{me as default};
