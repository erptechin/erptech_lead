import{a,j as e,C as p,A as u,e as O,P as f,f as w,B as J,F as M}from"./index-B2k9pfZk.js";import{P as F}from"./Page-CCHEMddj.js";import{u as k,a as g}from"./useApiHook-DHiNo7ZP.js";import{F as U,r as $}from"./react-apexcharts.min-Qz5Rw6QL.js";import{r as A,I as R,g as P,E as T}from"./menu-w8OXfxJ6.js";import{z as Z}from"./transition-Bh1CNPWN.js";import"./Datepicker-aJ53FPpm.js";import"./useMutation-ZLTg2bpF.js";import"./use-text-value-CcLcCNX2.js";import"./calculate-active-index-B3JD3Z-f.js";import"./label-COOQuZHl.js";import"./floating-ui.dom-CtcSe9Ld.js";function B({title:r,titleId:n,...l},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const I=a.forwardRef(B);function D({title:r,titleId:n,...l},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const v=a.forwardRef(D);function V(){const[r,n]=a.useState({leads:0,customers:0,leadUsers:0,salesOrders:0}),{data:l}=k({doctype:"Lead",fields:JSON.stringify(["name"])}),{data:s}=k({doctype:"User",fields:JSON.stringify(["name"])}),{data:o}=k({doctype:"Sales Order",fields:JSON.stringify(["name"])}),[x,i]=a.useState({doctype:"Lead",page:1,page_length:1,fields:null}),[t,m]=a.useState({doctype:"User",page:1,page_length:1,fields:null,filters:JSON.stringify([["role_profile_name","=","Lead Manager"]])}),[_,C]=a.useState({doctype:"User",page:1,page_length:1,fields:null,filters:JSON.stringify([["role_profile_name","=","Lead User"]])}),[L,z]=a.useState({doctype:"Sales Order",page:1,page_length:1,fields:null}),{data:h}=g(x),{data:j}=g(t),{data:y}=g(_),{data:N}=g(L);return a.useEffect(()=>{if(l!=null&&l.fields){const d=l.fields.map(c=>c.fieldname);i(c=>({...c,fields:JSON.stringify([...d,"name"])}))}},[l]),a.useEffect(()=>{if(s!=null&&s.fields){const d=s.fields.map(c=>c.fieldname);m(c=>({...c,fields:JSON.stringify([...d,"name"]),filters:JSON.stringify([["role_profile_name","=","Lead Manager"]])}))}},[s]),a.useEffect(()=>{if(s!=null&&s.fields){const d=s.fields.map(c=>c.fieldname);C(c=>({...c,fields:JSON.stringify([...d,"name"]),filters:JSON.stringify([["role_profile_name","=","Lead User"]])}))}},[s]),a.useEffect(()=>{if(o!=null&&o.fields){const d=o.fields.map(c=>c.fieldname);z(c=>({...c,fields:JSON.stringify([...d,"name"])}))}},[o]),a.useEffect(()=>{(h==null?void 0:h.counts)!==void 0&&n(d=>({...d,leads:h.counts}))},[h]),a.useEffect(()=>{(j==null?void 0:j.counts)!==void 0&&n(d=>({...d,customers:j.counts}))},[j]),a.useEffect(()=>{(y==null?void 0:y.counts)!==void 0&&n(d=>({...d,leadUsers:y.counts}))},[y]),a.useEffect(()=>{(N==null?void 0:N.counts)!==void 0&&n(d=>({...d,salesOrders:N.counts}))},[N]),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4 sm:gap-5 lg:gap-6",children:[e.jsx(p,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:r.leads}),e.jsx("p",{className:"truncate text-xs-plus",children:"Leads"})]}),e.jsx(u,{size:10,initialColor:"primary",classNames:{display:"mask is-star rounded-none"},children:e.jsx(v,{className:"size-5"})})]})}),e.jsx(p,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:r.customers}),e.jsx("p",{className:"truncate text-xs-plus",children:"Lead Manager"})]}),e.jsx(u,{size:10,initialColor:"success",classNames:{display:"mask is-star rounded-none"},children:e.jsx(v,{className:"size-5"})})]})}),e.jsx(p,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:r.leadUsers}),e.jsx("p",{className:"truncate text-xs-plus",children:"Lead User"})]}),e.jsx(u,{size:10,initialColor:"warning",classNames:{display:"mask is-star rounded-none"},children:e.jsx(v,{className:"size-5"})})]})}),e.jsx(p,{className:"p-4.5",children:e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-gray-800 dark:text-dark-100",children:r.salesOrders}),e.jsx("p",{className:"truncate text-xs-plus",children:"Sales Orders"})]}),e.jsx(u,{size:10,initialColor:"info",classNames:{display:"mask is-star rounded-none"},children:e.jsx(I,{className:"size-5"})})]})})]})}function E({id:r,lead_name:n,status:l,source:s,email:o,phone:x,color:i="primary"}){const t=n||r;return e.jsxs(p,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{size:10,name:t,initialColor:"auto"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("p",{className:"truncate font-medium text-gray-800 dark:text-dark-100",children:t})}),e.jsx("div",{className:"mt-0.5 flex text-xs text-gray-400 dark:text-dark-300",children:l&&e.jsx("p",{className:"hidden sm:flex",children:l})})]})]}),s&&e.jsx("p",{className:O(`this:${i}`,"-mt-3 text-end text-xs font-medium text-this dark:text-this-lighter"),children:s})]})}E.propTypes={id:f.string,lead_name:f.string,status:f.string,source:f.string,email:f.string,phone:f.string,color:f.string};const b="Lead",W=["lead_name","status","source","email_id","mobile_no"];function G(){const r=w(),[n,l]=a.useState([]),{data:s}=k({doctype:b,fields:JSON.stringify(W)}),[o,x]=a.useState({doctype:b,page:1,page_length:5,fields:null}),{data:i}=g(o);return a.useEffect(()=>{if(s!=null&&s.fields){const t=s==null?void 0:s.fields.map(m=>m.fieldname);x({...o,fields:JSON.stringify([...t,"name"])})}},[s]),a.useEffect(()=>{i!=null&&i.data&&l(i==null?void 0:i.data)},[i]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex min-w-0 items-center justify-between",children:[e.jsx("h2",{className:"truncate text-sm-plus font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Ongoing Leads"}),e.jsx("a",{onClick:()=>r("/sales/leads"),className:"border-b border-dotted border-current pb-0.5 text-xs-plus font-medium text-primary-600 outline-hidden transition-colors duration-300 hover:text-primary-600/70 focus:text-primary-600/70 dark:text-primary-400 dark:hover:text-primary-400/70 dark:focus:text-primary-400/70",children:"View All"})]}),e.jsx("div",{className:"mt-3 space-y-3.5",children:n.map(t=>e.jsx(E,{...t},t.id))})]})}const S="Sales Order",H=["customer","status","total","delivery_date","po_no"];function q(){const r=w(),[n,l]=a.useState([]),{data:s}=k({doctype:S,fields:JSON.stringify(H)}),[o,x]=a.useState({doctype:S,page:1,page_length:5,fields:null}),{data:i}=g(o);return a.useEffect(()=>{if(s!=null&&s.fields){const t=s==null?void 0:s.fields.map(m=>m.fieldname);x(m=>({...m,fields:JSON.stringify([...t,"name"])}))}},[s]),a.useEffect(()=>{i!=null&&i.data&&l(i==null?void 0:i.data)},[i]),e.jsxs(p,{className:"px-4 pb-4 sm:px-5",children:[e.jsxs("div",{className:"flex h-14 min-w-0 items-center justify-between py-3",children:[e.jsx("h2",{className:"font-medium tracking-wide text-gray-800 dark:text-dark-100",children:"Sales Orders"}),e.jsx(K,{})]}),e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsxs("div",{className:"flex items-center justify-between gap-2",onClick:()=>r(`/sales/sales-order/${t.id}`),style:{cursor:"pointer"},children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[e.jsx(u,{size:10,name:t.customer||t.id,initialColor:"auto"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 ",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-dark-100",children:t.customer||t.id}),t.status&&e.jsx("div",{className:"flex h-4.5 min-w-[1.125rem] items-center justify-center rounded-full bg-gray-200 px-1.5 text-tiny-plus font-medium leading-none text-gray-800 dark:bg-dark-450 dark:text-white",children:t.status})]}),e.jsx("p",{className:"mt-0.5 truncate text-xs text-gray-400 dark:text-dark-300",children:t.total?`Total: ${t.total}`:t.po_no||t.id})]})]}),e.jsx("a",{href:"##",onClick:m=>{m.preventDefault(),r(`/sales/sales-order/${t.id}`)},className:"hover:text-primary-600 focus:text-primary-600 dark:hover:text-primary-400 dark:focus:text-primary-400",children:e.jsx(U,{className:"size-5 ltr:-mr-1 rtl:-ml-1 rtl:rotate-180"})})]},t.id))})]})}function K(){const r=w();return e.jsxs(A,{as:"div",className:"relative inline-block text-left ltr:-mr-1.5 rtl:-ml-1.5",children:[e.jsx(R,{as:J,variant:"flat",isIcon:!0,className:"size-8 rounded-full",children:e.jsx(M,{className:"size-5"})}),e.jsx(Z,{as:a.Fragment,enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsx(P,{className:"absolute z-100 mt-1.5 min-w-[10rem] rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-700 dark:shadow-none ltr:right-0 rtl:left-0",children:e.jsx(T,{children:({focus:n})=>e.jsx("button",{onClick:()=>r("/sales/sales-order"),className:O("flex h-9 w-full items-center px-3 tracking-wide outline-hidden transition-colors",n&&"bg-gray-100 text-gray-800 dark:bg-dark-600 dark:text-dark-100"),children:e.jsx("span",{children:"View All"})})})})})]})}$();function ce(){return e.jsx(F,{title:"Dashboard",children:e.jsx("div",{className:"transition-content px-(--margin-x) pb-8 mt-5 lg:mt-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 sm:gap-5 lg:gap-6",children:[e.jsxs("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-8 lg:space-y-6",children:[e.jsx(V,{}),e.jsx(G,{})]}),e.jsx("div",{className:"col-span-12 lg:col-span-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 sm:gap-5 lg:grid-cols-1 lg:gap-6",children:e.jsx(q,{})})})]})})})}export{ce as default};
