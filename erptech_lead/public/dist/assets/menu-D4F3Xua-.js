import{K as w,h as oe,y as N,o as S,i as se,c as I,r as ue,$ as ie,d as de,w as ce,a as W,e as me,L as k,x as pe,R as fe,j as ve,k as Ie,l as be,m as ye,p as K,q as Se,v as ge,A as Ee,B as he,C as xe,F as J,G as X,D as Pe,E as $e,H as Me,n as O,I as Re,J as De,M as we,N as ke,Q as _e,S as Fe,U as Ce,u as Y,O as z,_ as Te}from"./transition-Bjlj-wUW.js";import{a as v,_ as A,R as D}from"./index-LumR9LpT.js";import{s as Ae,a as Oe}from"./use-text-value-DvuwZjGX.js";import{c as b,u as Ke,f as B}from"./calculate-active-index-P522dhW6.js";import{F as Ne}from"./Datepicker-DYSyDBji.js";import{K as Z,P as Qe}from"./label-Bynhy_B1.js";var Le=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Le||{}),Ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ue||{}),Be=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(Be||{});function G(e,n=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Te(n(e.items.slice()),u=>u.dataRef.current.domRef.current),a=o?r.indexOf(o):null;return a===-1&&(a=null),{items:r,activeItemIndex:a}}let Ge={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,n)=>{var o,r,a,u,i;if(e.menuState===1)return e;let d={...e,searchQuery:"",activationTrigger:(o=n.trigger)!=null?o:1,__demoMode:!1};if(n.focus===b.Nothing)return{...d,activeItemIndex:null};if(n.focus===b.Specific)return{...d,activeItemIndex:e.items.findIndex(m=>m.id===n.id)};if(n.focus===b.Previous){let m=e.activeItemIndex;if(m!==null){let y=e.items[m].dataRef.current.domRef,t=B(n,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});if(t!==null){let s=e.items[t].dataRef.current.domRef;if(((r=y.current)==null?void 0:r.previousElementSibling)===s.current||((a=s.current)==null?void 0:a.previousElementSibling)===null)return{...d,activeItemIndex:t}}}}else if(n.focus===b.Next){let m=e.activeItemIndex;if(m!==null){let y=e.items[m].dataRef.current.domRef,t=B(n,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});if(t!==null){let s=e.items[t].dataRef.current.domRef;if(((u=y.current)==null?void 0:u.nextElementSibling)===s.current||((i=s.current)==null?void 0:i.nextElementSibling)===null)return{...d,activeItemIndex:t}}}}let c=G(e),p=B(n,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});return{...d,...c,activeItemIndex:p}},3:(e,n)=>{let o=e.searchQuery!==""?0:1,r=e.searchQuery+n.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(i=>{var d;return((d=i.dataRef.current.textValue)==null?void 0:d.startsWith(r))&&!i.dataRef.current.disabled}),u=a?e.items.indexOf(a):-1;return u===-1||u===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:u,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,n)=>{let o=G(e,r=>[...r,{id:n.id,dataRef:n.dataRef}]);return{...e,...o}},6:(e,n)=>{let o=G(e,r=>{let a=r.findIndex(u=>u.id===n.id);return a!==-1&&r.splice(a,1),r});return{...e,...o,activationTrigger:1}},7:(e,n)=>e.buttonElement===n.element?e:{...e,buttonElement:n.element},8:(e,n)=>e.itemsElement===n.element?e:{...e,itemsElement:n.element}},H=v.createContext(null);H.displayName="MenuContext";function Q(e){let n=v.useContext(H);if(n===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Q),o}return n}function He(e,n){return Y(n.type,Ge,e,n)}let Ve=v.Fragment;function je(e,n){let{__demoMode:o=!1,...r}=e,a=v.useReducer(He,{__demoMode:o,menuState:o?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:u,itemsElement:i,buttonElement:d},c]=a,p=N(n);we(u===0,[d,i],(x,E)=>{c({type:1}),ke(E,_e.Loose)||(x.preventDefault(),d==null||d.focus())});let m=S(()=>{c({type:1})}),y=v.useMemo(()=>({open:u===0,close:m}),[u,m]),t={ref:p},s=k();return D.createElement(Fe,null,D.createElement(H.Provider,{value:a},D.createElement(Ce,{value:Y(u,{0:K.Open,1:K.Closed})},s({ourProps:t,theirProps:r,slot:y,defaultTag:Ve,name:"Menu"}))))}let qe="button";function Je(e,n){var o;let r=v.useId(),{id:a=`headlessui-menu-button-${r}`,disabled:u=!1,autoFocus:i=!1,...d}=e,[c,p]=Q("Menu.Button"),m=oe(),y=N(n,se(),S(f=>p({type:7,element:f}))),t=S(f=>{switch(f.key){case I.Space:case I.Enter:case I.ArrowDown:f.preventDefault(),f.stopPropagation(),A.flushSync(()=>p({type:0})),p({type:2,focus:b.First});break;case I.ArrowUp:f.preventDefault(),f.stopPropagation(),A.flushSync(()=>p({type:0})),p({type:2,focus:b.Last});break}}),s=S(f=>{switch(f.key){case I.Space:f.preventDefault();break}}),x=S(f=>{var C;if(ue(f.currentTarget))return f.preventDefault();u||(c.menuState===0?(A.flushSync(()=>p({type:1})),(C=c.buttonElement)==null||C.focus({preventScroll:!0})):(f.preventDefault(),p({type:0})))}),{isFocusVisible:E,focusProps:P}=ie({autoFocus:i}),{isHovered:$,hoverProps:_}=de({isDisabled:u}),{pressed:M,pressProps:h}=ce({disabled:u}),F=v.useMemo(()=>({open:c.menuState===0,active:M||c.menuState===0,disabled:u,hover:$,focus:E,autofocus:i}),[c,$,E,M,u,i]),R=W(m(),{ref:y,id:a,type:me(e,c.buttonElement),"aria-haspopup":"menu","aria-controls":(o=c.itemsElement)==null?void 0:o.id,"aria-expanded":c.menuState===0,disabled:u||void 0,autoFocus:i,onKeyDown:t,onKeyUp:s,onClick:x},P,_,h);return k()({ourProps:R,theirProps:d,slot:F,defaultTag:qe,name:"Menu.Button"})}let ze="div",We=z.RenderStrategy|z.Static;function Xe(e,n){var o,r;let a=v.useId(),{id:u=`headlessui-menu-items-${a}`,anchor:i,portal:d=!1,modal:c=!0,transition:p=!1,...m}=e,y=pe(i),[t,s]=Q("Menu.Items"),[x,E]=fe(y),P=ve(),[$,_]=v.useState(null),M=N(n,y?x:null,S(l=>s({type:8,element:l})),_),h=Ie(t.itemsElement);y&&(d=!0);let F=be(),[R,f]=ye(p,$,F!==null?(F&K.Open)===K.Open:t.menuState===0);Se(R,t.buttonElement,()=>{s({type:1})});let C=t.__demoMode?!1:c&&t.menuState===0;ge(C,h);let L=t.__demoMode?!1:c&&t.menuState===0;Ee(L,{allowed:v.useCallback(()=>[t.buttonElement,t.itemsElement],[t.buttonElement,t.itemsElement])});let U=t.menuState!==0,g=Ae(U,t.buttonElement)?!1:R;v.useEffect(()=>{let l=t.itemsElement;l&&t.menuState===0&&l!==(h==null?void 0:h.activeElement)&&l.focus({preventScroll:!0})},[t.menuState,t.itemsElement,h]),Ne(t.menuState===0,{container:t.itemsElement,accept(l){return l.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:l.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(l){l.setAttribute("role","none")}});let T=he(),ee=S(l=>{var V,j,q;switch(T.dispose(),l.key){case I.Space:if(t.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),s({type:3,value:l.key});case I.Enter:if(l.preventDefault(),l.stopPropagation(),s({type:1}),t.activeItemIndex!==null){let{dataRef:le}=t.items[t.activeItemIndex];(j=(V=le.current)==null?void 0:V.domRef.current)==null||j.click()}X(t.buttonElement);break;case I.ArrowDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Next});case I.ArrowUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Previous});case I.Home:case I.PageUp:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.First});case I.End:case I.PageDown:return l.preventDefault(),l.stopPropagation(),s({type:2,focus:b.Last});case I.Escape:l.preventDefault(),l.stopPropagation(),A.flushSync(()=>s({type:1})),(q=t.buttonElement)==null||q.focus({preventScroll:!0});break;case I.Tab:l.preventDefault(),l.stopPropagation(),A.flushSync(()=>s({type:1})),xe(t.buttonElement,l.shiftKey?J.Previous:J.Next);break;default:l.key.length===1&&(s({type:3,value:l.key}),T.setTimeout(()=>s({type:4}),350));break}}),te=S(l=>{switch(l.key){case I.Space:l.preventDefault();break}}),ne=v.useMemo(()=>({open:t.menuState===0}),[t.menuState]),re=W(y?P():{},{"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(r=t.buttonElement)==null?void 0:r.id,id:u,onKeyDown:ee,onKeyUp:te,role:"menu",tabIndex:t.menuState===0?0:void 0,ref:M,style:{...m.style,...E,"--button-width":$e(t.buttonElement,!0).width},...Pe(f)}),ae=k();return D.createElement(Me,{enabled:d?e.static||R:!1},ae({ourProps:re,theirProps:m,slot:ne,defaultTag:ze,features:We,visible:g,name:"Menu.Items"}))}let Ye=v.Fragment;function Ze(e,n){let o=v.useId(),{id:r=`headlessui-menu-item-${o}`,disabled:a=!1,...u}=e,[i,d]=Q("Menu.Item"),c=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===r:!1,p=v.useRef(null),m=N(n,p);O(()=>{if(!i.__demoMode&&i.menuState===0&&c&&i.activationTrigger!==0)return Re().requestAnimationFrame(()=>{var g,T;(T=(g=p.current)==null?void 0:g.scrollIntoView)==null||T.call(g,{block:"nearest"})})},[i.__demoMode,p,c,i.menuState,i.activationTrigger,i.activeItemIndex]);let y=Oe(p),t=v.useRef({disabled:a,domRef:p,get textValue(){return y()}});O(()=>{t.current.disabled=a},[t,a]),O(()=>(d({type:5,id:r,dataRef:t}),()=>d({type:6,id:r})),[t,r]);let s=S(()=>{d({type:1})}),x=S(g=>{if(a)return g.preventDefault();d({type:1}),X(i.buttonElement)}),E=S(()=>{if(a)return d({type:2,focus:b.Nothing});d({type:2,focus:b.Specific,id:r})}),P=Ke(),$=S(g=>{P.update(g),!a&&(c||d({type:2,focus:b.Specific,id:r,trigger:0}))}),_=S(g=>{P.wasMoved(g)&&(a||c||d({type:2,focus:b.Specific,id:r,trigger:0}))}),M=S(g=>{P.wasMoved(g)&&(a||c&&d({type:2,focus:b.Nothing}))}),[h,F]=Z(),[R,f]=De(),C=v.useMemo(()=>({active:c,focus:c,disabled:a,close:s}),[c,a,s]),L={id:r,ref:m,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":h,"aria-describedby":R,disabled:void 0,onClick:x,onFocus:E,onPointerEnter:$,onMouseEnter:$,onPointerMove:_,onMouseMove:_,onPointerLeave:M,onMouseLeave:M},U=k();return D.createElement(F,null,D.createElement(f,null,U({ourProps:L,theirProps:u,slot:C,defaultTag:Ye,name:"Menu.Item"})))}let et="div";function tt(e,n){let[o,r]=Z(),a=e,u={ref:n,"aria-labelledby":o,role:"group"},i=k();return D.createElement(r,null,i({ourProps:u,theirProps:a,slot:{},defaultTag:et,name:"Menu.Section"}))}let nt="header";function rt(e,n){let o=v.useId(),{id:r=`headlessui-menu-heading-${o}`,...a}=e,u=Qe();O(()=>u.register(r),[r,u.register]);let i={id:r,ref:n,role:"presentation",...u.props};return k()({ourProps:i,theirProps:a,slot:{},defaultTag:nt,name:"Menu.Heading"})}let at="div";function lt(e,n){let o=e,r={ref:n,role:"separator"};return k()({ourProps:r,theirProps:o,slot:{},defaultTag:at,name:"Menu.Separator"})}let ot=w(je),st=w(Je),ut=w(Xe),it=w(Ze),dt=w(tt),ct=w(rt),mt=w(lt),St=Object.assign(ot,{Button:st,Items:ut,Item:it,Section:dt,Heading:ct,Separator:mt});export{it as E,st as I,ut as g,St as r};
