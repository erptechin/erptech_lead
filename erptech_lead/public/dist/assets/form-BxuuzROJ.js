import{a as n,j as e,C as B,B as i,q as te,s as se,t as H,v as y,w as re,x as h,U as ye,k as T,A as he,J as ge,e as fe,u as be,l as ke,p as je,y as ve,S as _e,I as Z,z as Ne}from"./index-ylOuoFxF.js";import{u as we,o as Ce}from"./index.esm-Bm0EUsmF.js";import{F as O,a as Se,b as De,S as Fe,D as X}from"./dynamicForms-DBW0zuGQ.js";import{P as Ae}from"./Page-C6Mv6ijq.js";import{d as Q,u as Te,b as Oe,c as Ee}from"./useApiHook-ClG7Ftbp.js";import{z as w,F as g}from"./transition-w97hCQTV.js";import{y as E,j as L}from"./iconBase-BLu30nXg.js";import{F as Le}from"./DocumentPlusIcon-CK-UDlif.js";import{H as Me,G as Ue,U as ze,K as Re,j as Ie}from"./combobox-CukONcxt.js";import"./ConfirmModal-CjOaxa9x.js";import"./Datepicker-BsAqt26f.js";import"./label-D5RvHU6n.js";import"./useMutation-GhgxFWjH.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-DqxR18vz.js";import"./hidden-D2neAe2_.js";import"./use-by-comparator-CQf2Q8Vl.js";import"./calculate-active-index-CG5pMfGd.js";import"./use-tree-walker-BYfZtfoV.js";import"./frozen-nbVkOS8n.js";function $e({title:m,titleId:s,...f},b){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":s},f),m?n.createElement("title",{id:s},m):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Pe=n.forwardRef($e);function Be({title:m,titleId:s,...f},b){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:b,"aria-labelledby":s},f),m?n.createElement("title",{id:s},m):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const le=n.forwardRef(Be);function He({id:m,data:s,setValue:f,refetchData:b}){var j;const[k,o]=n.useState(!1),[a,u]=n.useState({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]}),t=Q(c=>{c&&k&&(o(!1),b())}),C=()=>{if(a.description&&a.description.trim()&&a.next_date){const c=(s==null?void 0:s.custom_followup_history)||[],p=[...c,{...a,idx:c.length+1}];t.mutate({doctype:"Lead",body:{id:m,custom_followup_history:p,custom_next_follow_up_date:a.next_date,custom_lead_status:"Call Back"}}),f("custom_followup_history",p),u({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})}};return m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx(B,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Follow-up History Records"}),e.jsxs(i,{onClick:()=>o(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(le,{className:"size-4"}),"Add New Record"]})]}),s!=null&&s.custom_followup_history&&((j=s==null?void 0:s.custom_followup_history)==null?void 0:j.length)>0?e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(te,{hoverable:!0,className:"w-full min-w-[600px] text-left rtl:text-right",children:[e.jsx(se,{children:e.jsxs(H,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Created Date"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Description"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Next Follow-up Date"})]})}),e.jsx(re,{children:s==null?void 0:s.custom_followup_history.map((c,p)=>e.jsxs(H,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:p+1}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:c.created_date?new Date(c.created_date).toLocaleDateString():"-"}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:c.description||"-"}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:c.next_date?new Date(c.next_date).toLocaleDateString():"-"})]},p))})]})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No follow-up records yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(w,{appear:!0,show:k,as:E,onClose:()=>o(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Follow-up History"}),e.jsx("button",{onClick:()=>o(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a.description,onChange:c=>u({...a,description:c.target.value}),placeholder:"Enter follow-up description...",rows:"4",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Created Date"}),e.jsx("input",{type:"date",value:a.created_date,onChange:c=>u({...a,created_date:c.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Next Follow-up Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:a.next_date,onChange:c=>u({...a,next_date:c.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(i,{variant:"outlined",onClick:()=>{o(!1),u({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})},children:"Cancel"}),e.jsx(i,{color:"primary",onClick:C,disabled:!a.description||!a.description.trim()||!a.next_date,children:"Add Record"})]})]})})]})]}):null}function Je({id:m,data:s,setValue:f,refetchData:b}){var p;const[k,o]=n.useState(!1),[a,u]=n.useState({document_type:"",file_attachment:"",comments:""}),t=[{label:"Car Mulkiya",value:"Car Mulkiya"},{label:"Driving License",value:"Driving License"},{label:"Emirates ID",value:"Emirates ID"},{label:"Invoice",value:"Invoice"},{label:"Credit Note",value:"Credit Note"},{label:"Debit Note",value:"Debit Note"},{label:"Car Passing",value:"Car Passing"}],C=Q(d=>{d&&k&&(o(!1),b())}),j=d=>{const x=new Date(d),M=x.getFullYear(),U=String(x.getMonth()+1).padStart(2,"0"),z=String(x.getDate()).padStart(2,"0"),R=String(x.getHours()).padStart(2,"0"),S=String(x.getMinutes()).padStart(2,"0"),v=String(x.getSeconds()).padStart(2,"0");return`${M}-${U}-${z} ${R}:${S}:${v}`},c=()=>{if(a.document_type&&a.file_attachment){const d=(s==null?void 0:s.cod_documents)||[],x=[...d,{...a,upload_date:j(new Date),idx:d.length+1}];C.mutate({doctype:"Lead",body:{id:m,cod_documents:x}}),f("cod_documents",x),u({document_type:"",file_attachment:"",comments:""})}};return m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx(B,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Documents"}),e.jsxs(i,{onClick:()=>o(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(le,{className:"size-4"}),"Add New Record"]})]}),s!=null&&s.cod_documents&&((p=s==null?void 0:s.cod_documents)==null?void 0:p.length)>0?e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(te,{hoverable:!0,className:"w-full min-w-[700px] text-left rtl:text-right",children:[e.jsx(se,{children:e.jsxs(H,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Document Type"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"File Attachment"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Upload Date"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Status"}),e.jsx(y,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Comments"})]})}),e.jsx(re,{children:s==null?void 0:s.cod_documents.map((d,x)=>e.jsxs(H,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:x+1}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:d.document_type||"-"}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:d.file_attachment?e.jsx("a",{href:d.file_attachment,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline dark:text-blue-400",children:"View File"}):"-"}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:d.upload_date?new Date(d.upload_date).toLocaleDateString():"-"}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:d.status||"-"}),e.jsx(h,{className:"text-gray-700 dark:text-dark-200",children:d.comments||"-"})]},x))})]})})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No documents yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(w,{appear:!0,show:k,as:E,onClose:()=>o(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Document"}),e.jsx("button",{onClick:()=>o(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(Se,{label:e.jsxs(e.Fragment,{children:["Document Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),lists:t,value:a.document_type,onChange:d=>u({...a,document_type:d||""}),placeholder:"Select Document Type"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["File Attachment ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(ye,{onChange:d=>{d&&u({...a,file_attachment:d})},children:({...d})=>e.jsxs(i,{...d,unstyled:!0,className:T("mt-3 w-full shrink-0 flex-col rounded-lg border-2 border-dashed py-10 border-gray-300 dark:border-dark-450"),children:[e.jsx(De,{className:"size-12"}),e.jsxs("span",{className:T("pointer-events-none mt-2 text-gray-600 dark:text-dark-200"),children:[e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:"Browse"}),e.jsx("span",{children:" or drop your files here"})]}),a.file_attachment&&e.jsx("span",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:"File selected"})]})}),a.file_attachment&&e.jsx("div",{className:"mt-2 flex flex-col space-y-4",children:e.jsx("div",{className:"relative inline-block",children:e.jsx(he,{size:24,src:`${ge}${a.file_attachment}`,classNames:{display:"rounded-lg"}})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Comments"}),e.jsx("textarea",{value:a.comments,onChange:d=>u({...a,comments:d.target.value}),placeholder:"Enter comments...",rows:"3",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(i,{variant:"outlined",onClick:()=>{o(!1),u({document_type:"",file_attachment:"",comments:""})},children:"Cancel"}),e.jsx(i,{color:"primary",onClick:c,disabled:!a.document_type||!a.file_attachment,children:"Add Document"})]})]})})]})]}):null}const ee="Lead",N="Lead",W=["first_name","email","mobile_no","custom_car_year","custom_car_brand_new","custom_car_make","custom_car_model","custom_car_emirate","custom_car_registration_date","custom_policy_start_date","custom_date_of_birth","custom_license_country","custom_driving_experience","custom_nationality"],K=["custom_lead_status","custom_next_follow_up_date","source","custom_call_back_date","custom_call_back_time","custom_call_back_notes","custom_claims_last_12_months","custom_gcc_specification","custom_current_policy_active","custom_no_claims_years","custom_personal_use_only","custom_policy_fully_comprehensive","custom_followup_history","cod_documents"],ae={ignorFields:{status:!0,custom_followup_history:!0,cod_documents:!0}};function xa(){const{user:{role_profile_name:m}}=fe(),{isDark:s,darkColorScheme:f,lightColorScheme:b}=be(),k=ke(),{id:o}=je(),{data:a,isFetching:u}=Te({doctype:N,fields:JSON.stringify([...W,...K])}),{data:t,isFetching:C,refetch:j}=Oe({doctype:N,id:o,fields:JSON.stringify([...W,...K])}),c=Ee(r=>{r&&(z(),k(-1))}),p=Q(r=>{r&&(z(),k(-1))}),{register:d,handleSubmit:x,formState:{errors:M},control:U,reset:z,setValue:R}=we({resolver:Ce(Fe(a==null?void 0:a.fields,["status"])),values:o?t:{}}),[S,v]=n.useState(!1),[oe,I]=n.useState(!1),[de,D]=n.useState(!1),[F,A]=n.useState({custom_assigned_user:"",custom_policy_number:""}),[$,P]=n.useState(""),[V,ce]=n.useState([]),[ne,J]=n.useState(null),G=["Car Mulkiya","Driving License","Emirates ID","Invoice","Credit Note","Debit Note","Car Passing"],q=(()=>{if(!(t!=null&&t.cod_documents)||t.cod_documents.length===0)return!1;const r=t.cod_documents.map(l=>l.document_type).filter(l=>l&&l.trim()!=="");return G.every(l=>r.includes(l))})();n.useEffect(()=>{S&&(t!=null&&t.custom_policy_number&&A(r=>({...r,custom_policy_number:t.custom_policy_number||""})),ve({doctype:"User",fields:JSON.stringify(["name","full_name","email"]),filters:JSON.stringify([["role_profile_name","=","Lead Manager"]]),page_length:100}).then(r=>{r!=null&&r.data&&ce(r.data.map(l=>({label:l.full_name||l.name,value:l.name,email:l.email})))}))},[S,t==null?void 0:t.custom_policy_number]);const Y=$===""?V:V.filter(r=>{var l;return r.label.toLowerCase().replace(/\s+/g,"").includes($.toLowerCase().replace(/\s+/g,""))||((l=r.email)==null?void 0:l.toLowerCase().includes($.toLowerCase()))}),ie=()=>{if(o&&q){const r={id:o,custom_assigned_user:F.custom_assigned_user,custom_policy_number:F.custom_policy_number,custom_lead_status:"CEO Approval"};p.mutate({doctype:N,body:r}),v(!1),A({custom_assigned_user:"",custom_policy_number:""}),J(null),P("")}},me=()=>{D(!0)},xe=()=>{if(o){const r={id:o,custom_lead_status:"Approved"};p.mutate({doctype:N,body:r},{onSuccess:()=>{D(!1),I(!0),j()}})}},ue=r=>{const l={...r,status:o?r.status:"Open"};o?p.mutate({doctype:N,body:{...l,id:o}}):c.mutate({doctype:N,body:l})};return u||C?e.jsx(_e,{style:{"--sk-color":s?f[700]:b[300]}}):e.jsx(Ae,{title:(o?"Edit ":"New ")+ee,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Le,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[o?"Edit":"New"," ",ee]})]}),e.jsxs("div",{className:"flex gap-2",children:[o&&m==="Lead Manager"&&(t==null?void 0:t.custom_lead_status)==="CEO Approval"&&e.jsx(i,{className:"min-w-[7rem]",variant:"outlined",color:"primary",onClick:me,children:"Make Approved"}),o&&m==="Lead User"&&(t==null?void 0:t.custom_lead_status)!=="Approved"&&e.jsx(i,{className:"min-w-[7rem]",variant:"outlined",color:"primary",onClick:()=>v(!0),disabled:(t==null?void 0:t.custom_lead_status)==="CEO Approval",children:(t==null?void 0:t.custom_lead_status)==="CEO Approval"?"Waiting For Approval":" Submit For CEO Approval"}),e.jsx(i,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>k(-1),children:"Back"}),e.jsx(i,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsx("form",{autoComplete:"off",onSubmit:x(ue),id:"new-post-form",children:e.jsxs("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:[e.jsx(Je,{id:o,data:t,setValue:R,refetchData:j}),e.jsx(He,{id:o,data:t,setValue:R,refetchData:j}),e.jsx("div",{className:"col-span-12 lg:col-span-7",children:e.jsx(B,{className:"p-4 sm:px-5",children:e.jsx("div",{className:"mt-5 space-y-5",children:e.jsx(X,{infos:a,fields:W,register:d,tables:ae,control:U,errors:M})})})}),e.jsx("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-5 lg:space-y-6",children:e.jsx(B,{className:"p-4 sm:px-5",children:e.jsx(X,{infos:a,tables:ae,fields:K,register:d,control:U,errors:M})})})]})}),e.jsxs(w,{appear:!0,show:S,as:E,onClose:()=>v(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Submit For CEO Approval"}),e.jsx("button",{onClick:()=>v(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Assign User"}),e.jsx(Me,{value:ne,onChange:r=>{J(r),A({...F,custom_assigned_user:(r==null?void 0:r.value)||""})},children:({open:r})=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative w-full cursor-pointer overflow-hidden",children:e.jsx(Ue,{as:Z,autoComplete:"off",displayValue:l=>(l==null?void 0:l.label)||"",onChange:l=>P(l.target.value),placeholder:"Select User",suffix:e.jsx(ze,{children:e.jsx(Ne,{className:T("size-5 transition-transform",r&&"rotate-180"),"aria-hidden":"true"})})})}),e.jsx(w,{as:"div",enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",afterLeave:()=>P(""),children:e.jsx(Re,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-y-auto overflow-x-hidden rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-750 dark:shadow-none",children:Y.length===0&&$!==""?e.jsx("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-800 dark:text-dark-100",children:"Nothing found"}):Y.map(l=>e.jsx(Ie,{className:({selected:_,active:pe})=>T("relative cursor-pointer select-none px-4 py-2 outline-hidden transition-colors",pe&&!_&&"bg-gray-100 dark:bg-dark-600",_?"bg-primary-600 text-white dark:bg-primary-500":"text-gray-800 dark:text-dark-100"),value:l,children:({selected:_})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:l.label}),l.email&&e.jsx("span",{className:T("text-xs",_?"text-primary-100":"text-gray-500 dark:text-dark-300"),children:l.email})]})},l.value))})})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Policy Number"}),e.jsx(Z,{type:"text",value:F.custom_policy_number,onChange:r=>A({...F,custom_policy_number:r.target.value}),placeholder:"Enter Policy Number",autoComplete:"off"})]}),!q&&e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-200 p-3 dark:bg-yellow-900/20 dark:border-yellow-800",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Warning:"})," All required document types must be uploaded before submitting for CEO approval."]}),e.jsxs("p",{className:"text-xs mt-1 text-yellow-700 dark:text-yellow-300",children:["Missing: ",G.filter(r=>{var l;return!((l=t==null?void 0:t.cod_documents)!=null&&l.some(_=>_.document_type===r))}).join(", ")]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(i,{variant:"outlined",onClick:()=>{v(!1),A({custom_assigned_user:"",custom_policy_number:""}),J(null),P("")},children:"Cancel"}),e.jsx(i,{color:"primary",onClick:ie,disabled:!q,children:"Submit For Approval"})]})]})})]}),e.jsxs(w,{appear:!0,show:de,as:E,onClose:()=>D(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-md flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Confirm Approval"}),e.jsx("button",{onClick:()=>D(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-base text-gray-700 dark:text-dark-200",children:"Are you sure you want to approve this lead?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:'This action will change the lead status to "Approved".'})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(i,{variant:"outlined",onClick:()=>D(!1),children:"No"}),e.jsx(i,{color:"primary",onClick:xe,children:"Yes"})]})]})})]}),e.jsxs(w,{appear:!0,show:oe,as:E,onClose:()=>I(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-md flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Success"}),e.jsx("button",{onClick:()=>I(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx(Pe,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Lead Approved Successfully"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-dark-300",children:'The lead status has been updated to "Approved".'})]})]})}),e.jsx("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:e.jsx(i,{color:"primary",onClick:()=>{I(!1),j()},children:"OK"})})]})})]})]})})}export{xa as default};
