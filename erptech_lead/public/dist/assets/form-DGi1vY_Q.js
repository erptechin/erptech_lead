import{a as m,j as e,C as U,B as x,k as X,l as Z,n as L,o as h,p as ee,q as y,U as de,e as D,A as ne,J as ce,u as ie,f as me,h as xe,s as ue,S as pe,I as he,t as ye}from"./index-BM4U45Fs.js";import{u as ge,o as fe}from"./index.esm-BA1alL0r.js";import{F as P,a as be,b as ke,S as je,D as G}from"./dynamicForms--viQmmAf.js";import{P as ve}from"./Page-_Q1o_FXd.js";import{d as B,u as _e,b as Ne,c as we}from"./useApiHook-aMg0BZJo.js";import{z as R,F as _}from"./transition-CfDl3fjG.js";import{y as J,j as q}from"./iconBase-Dze8giQU.js";import{F as Ce}from"./DocumentPlusIcon-B1cFhBX4.js";import{H as De,G as Se,U as Fe,K as Ae,j as Te}from"./combobox-DIyCDkJf.js";import"./ConfirmModal-BY5tGDMT.js";import"./Datepicker-B_5UzTyD.js";import"./label-DR8oe00P.js";import"./useMutation-Fn_rkIKD.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-DrCxzoti.js";import"./hidden-BMXAvFuL.js";import"./use-by-comparator-BM-Xf82J.js";import"./calculate-active-index-B3Iqp6VG.js";import"./frozen-DeS906N4.js";function Oe({title:p,titleId:t,...f},g){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:g,"aria-labelledby":t},f),p?m.createElement("title",{id:t},p):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const ae=m.forwardRef(Oe);function Ee({id:p,data:t,setValue:f,refetchData:g}){var j;const[n,c]=m.useState(!1),[s,l]=m.useState({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]}),N=B(d=>{d&&n&&(c(!1),g())}),k=()=>{if(s.description&&s.description.trim()&&s.next_date){const d=(t==null?void 0:t.custom_followup_history)||[],u=[...d,{...s,idx:d.length+1}];N.mutate({doctype:"Lead",body:{id:p,custom_followup_history:u,custom_next_follow_up_date:s.next_date,custom_lead_status:"Call Back"}}),f("custom_followup_history",u),l({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})}};return p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx(U,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Follow-up History Records"}),e.jsxs(x,{onClick:()=>c(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"size-4"}),"Add New Record"]})]}),t!=null&&t.custom_followup_history&&((j=t==null?void 0:t.custom_followup_history)==null?void 0:j.length)>0?e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(X,{hoverable:!0,className:"w-full min-w-[600px] text-left rtl:text-right",children:[e.jsx(Z,{children:e.jsxs(L,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Created Date"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Description"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Next Follow-up Date"})]})}),e.jsx(ee,{children:t==null?void 0:t.custom_followup_history.map((d,u)=>e.jsxs(L,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:u+1}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.created_date?new Date(d.created_date).toLocaleDateString():"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.description||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.next_date?new Date(d.next_date).toLocaleDateString():"-"})]},u))})]})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No follow-up records yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(R,{appear:!0,show:n,as:J,onClose:()=>c(!1),children:[e.jsx(_,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(_,{as:q,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Follow-up History"}),e.jsx("button",{onClick:()=>c(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(P,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:s.description,onChange:d=>l({...s,description:d.target.value}),placeholder:"Enter follow-up description...",rows:"4",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Created Date"}),e.jsx("input",{type:"date",value:s.created_date,onChange:d=>l({...s,created_date:d.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Next Follow-up Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:s.next_date,onChange:d=>l({...s,next_date:d.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(x,{variant:"outlined",onClick:()=>{c(!1),l({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})},children:"Cancel"}),e.jsx(x,{color:"primary",onClick:k,disabled:!s.description||!s.description.trim()||!s.next_date,children:"Add Record"})]})]})})]})]}):null}function Ue({id:p,data:t,setValue:f,refetchData:g}){var u;const[n,c]=m.useState(!1),[s,l]=m.useState({document_type:"",file_attachment:"",comments:""}),N=[{label:"Car Mulkiya",value:"Car Mulkiya"},{label:"Driving License",value:"Driving License"},{label:"Emirates ID",value:"Emirates ID"},{label:"Invoice",value:"Invoice"},{label:"Credit Note",value:"Credit Note"},{label:"Debit Note",value:"Debit Note"},{label:"Car Passing",value:"Car Passing"}],k=B(o=>{o&&n&&(c(!1),g())}),j=o=>{const i=new Date(o),S=i.getFullYear(),F=String(i.getMonth()+1).padStart(2,"0"),A=String(i.getDate()).padStart(2,"0"),w=String(i.getHours()).padStart(2,"0"),b=String(i.getMinutes()).padStart(2,"0"),T=String(i.getSeconds()).padStart(2,"0");return`${S}-${F}-${A} ${w}:${b}:${T}`},d=()=>{if(s.document_type&&s.file_attachment){const o=(t==null?void 0:t.cod_documents)||[],i=[...o,{...s,upload_date:j(new Date),idx:o.length+1}];k.mutate({doctype:"Lead",body:{id:p,cod_documents:i}}),f("cod_documents",i),l({document_type:"",file_attachment:"",comments:""})}};return p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx(U,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Documents"}),e.jsxs(x,{onClick:()=>c(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"size-4"}),"Add New Record"]})]}),t!=null&&t.cod_documents&&((u=t==null?void 0:t.cod_documents)==null?void 0:u.length)>0?e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(X,{hoverable:!0,className:"w-full min-w-[700px] text-left rtl:text-right",children:[e.jsx(Z,{children:e.jsxs(L,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Document Type"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"File Attachment"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Upload Date"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Status"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Comments"})]})}),e.jsx(ee,{children:t==null?void 0:t.cod_documents.map((o,i)=>e.jsxs(L,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:i+1}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:o.document_type||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:o.file_attachment?e.jsx("a",{href:o.file_attachment,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline dark:text-blue-400",children:"View File"}):"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:o.upload_date?new Date(o.upload_date).toLocaleDateString():"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:o.status||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:o.comments||"-"})]},i))})]})})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No documents yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(R,{appear:!0,show:n,as:J,onClose:()=>c(!1),children:[e.jsx(_,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(_,{as:q,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Document"}),e.jsx("button",{onClick:()=>c(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(P,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(be,{label:e.jsxs(e.Fragment,{children:["Document Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),lists:N,value:s.document_type,onChange:o=>l({...s,document_type:o||""}),placeholder:"Select Document Type"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["File Attachment ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(de,{onChange:o=>{o&&l({...s,file_attachment:o})},children:({...o})=>e.jsxs(x,{...o,unstyled:!0,className:D("mt-3 w-full shrink-0 flex-col rounded-lg border-2 border-dashed py-10 border-gray-300 dark:border-dark-450"),children:[e.jsx(ke,{className:"size-12"}),e.jsxs("span",{className:D("pointer-events-none mt-2 text-gray-600 dark:text-dark-200"),children:[e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:"Browse"}),e.jsx("span",{children:" or drop your files here"})]}),s.file_attachment&&e.jsx("span",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:"File selected"})]})}),s.file_attachment&&e.jsx("div",{className:"mt-2 flex flex-col space-y-4",children:e.jsx("div",{className:"relative inline-block",children:e.jsx(ne,{size:24,src:`${ce}${s.file_attachment}`,classNames:{display:"rounded-lg"}})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Comments"}),e.jsx("textarea",{value:s.comments,onChange:o=>l({...s,comments:o.target.value}),placeholder:"Enter comments...",rows:"3",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(x,{variant:"outlined",onClick:()=>{c(!1),l({document_type:"",file_attachment:"",comments:""})},children:"Cancel"}),e.jsx(x,{color:"primary",onClick:d,disabled:!s.document_type||!s.file_attachment,children:"Add Document"})]})]})})]})]}):null}const K="Lead",C="Lead",$=["first_name","email","mobile_no","custom_car_year","custom_car_brand_new","custom_car_make","custom_car_model","custom_car_emirate","custom_car_registration_date","custom_policy_start_date","custom_date_of_birth","custom_license_country","custom_driving_experience","custom_nationality"],H=["custom_lead_status","custom_next_follow_up_date","source","custom_call_back_date","custom_call_back_time","custom_call_back_notes","custom_claims_last_12_months","custom_gcc_specification","custom_current_policy_active","custom_no_claims_years","custom_personal_use_only","custom_policy_fully_comprehensive","custom_followup_history","cod_documents"],Y={ignorFields:{status:!0,custom_followup_history:!0,cod_documents:!0}};function aa(){const{isDark:p,darkColorScheme:t,lightColorScheme:f}=ie(),g=me(),{id:n}=xe(),{data:c,isFetching:s}=_e({doctype:C,fields:JSON.stringify([...$,...H])}),{data:l,isFetching:N,refetch:k}=Ne({doctype:C,id:n,fields:JSON.stringify([...$,...H])}),j=we(r=>{r&&(F(),g(-1))}),d=B(r=>{r&&(F(),g(-1))}),{register:u,handleSubmit:o,formState:{errors:i},control:S,reset:F,setValue:A}=ge({resolver:fe(je(c==null?void 0:c.fields,["status"])),values:n?l:{}});console.log(i);const[w,b]=m.useState(!1),[T,z]=m.useState({custom_assigned_user:""}),[O,E]=m.useState(""),[Q,te]=m.useState([]),[se,M]=m.useState(null),V=["Car Mulkiya","Driving License","Emirates ID","Invoice","Credit Note","Debit Note","Car Passing"],I=(()=>{if(!(l!=null&&l.cod_documents)||l.cod_documents.length===0)return!1;const r=l.cod_documents.map(a=>a.document_type).filter(a=>a&&a.trim()!=="");return V.every(a=>r.includes(a))})();m.useEffect(()=>{w&&ue({doctype:"User",fields:JSON.stringify(["name","full_name","email"]),filters:JSON.stringify([["role_profile_name","=","Lead Manager"]]),page_length:100}).then(r=>{r!=null&&r.data&&te(r.data.map(a=>({label:a.full_name||a.name,value:a.name,email:a.email})))})},[w]);const W=O===""?Q:Q.filter(r=>{var a;return r.label.toLowerCase().replace(/\s+/g,"").includes(O.toLowerCase().replace(/\s+/g,""))||((a=r.email)==null?void 0:a.toLowerCase().includes(O.toLowerCase()))}),re=()=>{if(n&&I){const r={id:n,custom_assigned_user:T.custom_assigned_user,custom_lead_status:"CEO Approval"};d.mutate({doctype:C,body:r}),b(!1),z({custom_assigned_user:""}),M(null),E("")}},le=r=>{const a={...r,status:n?r.status:"Open"};n?d.mutate({doctype:C,body:{...a,id:n}}):j.mutate({doctype:C,body:a})};return s||N?e.jsx(pe,{style:{"--sk-color":p?t[700]:f[300]}}):e.jsx(ve,{title:(n?"Edit ":"New ")+K,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[n?"Edit":"New"," ",K]})]}),e.jsxs("div",{className:"flex gap-2",children:[n&&(l==null?void 0:l.custom_lead_status)!=="CEO Approval"&&e.jsx(x,{className:"min-w-[7rem]",variant:"outlined",color:"secondary",onClick:()=>b(!0),children:"Submit For CEO Approval"}),e.jsx(x,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>g(-1),children:"Back"}),e.jsx(x,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsx("form",{autoComplete:"off",onSubmit:o(le),id:"new-post-form",children:e.jsxs("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:[e.jsx(Ue,{id:n,data:l,setValue:A,refetchData:k}),e.jsx(Ee,{id:n,data:l,setValue:A,refetchData:k}),e.jsx("div",{className:"col-span-12 lg:col-span-7",children:e.jsx(U,{className:"p-4 sm:px-5",children:e.jsx("div",{className:"mt-5 space-y-5",children:e.jsx(G,{infos:c,fields:$,register:u,tables:Y,control:S,errors:i})})})}),e.jsx("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-5 lg:space-y-6",children:e.jsx(U,{className:"p-4 sm:px-5",children:e.jsx(G,{infos:c,tables:Y,fields:H,register:u,control:S,errors:i})})})]})}),e.jsxs(R,{appear:!0,show:w,as:J,onClose:()=>b(!1),children:[e.jsx(_,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(_,{as:q,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Submit For CEO Approval"}),e.jsx("button",{onClick:()=>b(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(P,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Assign User"}),e.jsx(De,{value:se,onChange:r=>{M(r),z({...T,custom_assigned_user:(r==null?void 0:r.value)||""})},children:({open:r})=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative w-full cursor-pointer overflow-hidden",children:e.jsx(Se,{as:he,autoComplete:"off",displayValue:a=>(a==null?void 0:a.label)||"",onChange:a=>E(a.target.value),placeholder:"Select User",suffix:e.jsx(Fe,{children:e.jsx(ye,{className:D("size-5 transition-transform",r&&"rotate-180"),"aria-hidden":"true"})})})}),e.jsx(R,{as:"div",enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",afterLeave:()=>E(""),children:e.jsx(Ae,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-y-auto overflow-x-hidden rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-750 dark:shadow-none",children:W.length===0&&O!==""?e.jsx("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-800 dark:text-dark-100",children:"Nothing found"}):W.map(a=>e.jsx(Te,{className:({selected:v,active:oe})=>D("relative cursor-pointer select-none px-4 py-2 outline-hidden transition-colors",oe&&!v&&"bg-gray-100 dark:bg-dark-600",v?"bg-primary-600 text-white dark:bg-primary-500":"text-gray-800 dark:text-dark-100"),value:a,children:({selected:v})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:a.label}),a.email&&e.jsx("span",{className:D("text-xs",v?"text-primary-100":"text-gray-500 dark:text-dark-300"),children:a.email})]})},a.value))})})]})})]}),!I&&e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-200 p-3 dark:bg-yellow-900/20 dark:border-yellow-800",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Warning:"})," All required document types must be uploaded before submitting for CEO approval."]}),e.jsxs("p",{className:"text-xs mt-1 text-yellow-700 dark:text-yellow-300",children:["Missing: ",V.filter(r=>{var a;return!((a=l==null?void 0:l.cod_documents)!=null&&a.some(v=>v.document_type===r))}).join(", ")]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(x,{variant:"outlined",onClick:()=>{b(!1),z({custom_assigned_user:""}),M(null),E("")},children:"Cancel"}),e.jsx(x,{color:"primary",onClick:re,disabled:!I,children:"Submit For Approval"})]})]})})]})]})})}export{aa as default};
