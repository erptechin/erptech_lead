import{t as J,o as g,K as U,y as V,b as Re,a as ye,c as $,r as Ie,$ as $e,d as De,w as Pe,_ as ve,e as Le,L as G,x as Te,n as Me,u as Ce,g as we,i as X,m as Fe,h as ke,R as _e,f as Ae,p as be,a1 as Be,j as Ne,k as de,E as K,l as Qe,q as Ke,s as He,a3 as Ue,v as Ve,A as Ge,B as je,C as qe,M as ze,D as Je,O as ce,H as Xe}from"./transition-CBVadWHH.js";import{a as d,H as B,R as C}from"./index-BoCzCk_E.js";import{Q as We,u as Ze,p as Ye,I as et,U as tt,a as nt,l as ot,T as rt,b as it,K as at,j as lt}from"./use-by-comparator-DF_ef1co.js";import{c as R,y as st,l as ut,u as dt,f as le}from"./calculate-active-index-C4R1c-E8.js";function ct(e,n){let i=d.useRef({left:0,top:0});if(J(()=>{if(!n)return;let r=n.getBoundingClientRect();r&&(i.current=r)},[e,n]),n==null||!e||n===document.activeElement)return!1;let t=n.getBoundingClientRect();return t.top!==i.current.top||t.left!==i.current.left}let pe=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function fe(e){var n,i;let t=(n=e.innerText)!=null?n:"",r=e.cloneNode(!0);if(!(r instanceof HTMLElement))return t;let s=!1;for(let f of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))f.remove(),s=!0;let v=s?(i=r.innerText)!=null?i:"":t;return pe.test(v)&&(v=v.replace(pe,"")),v}function pt(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let i=e.getAttribute("aria-labelledby");if(i){let t=i.split(" ").map(r=>{let s=document.getElementById(r);if(s){let v=s.getAttribute("aria-label");return typeof v=="string"?v.trim():fe(s).trim()}return null}).filter(Boolean);if(t.length>0)return t.join(", ")}return fe(e).trim()}function ft(e){let n=d.useRef(""),i=d.useRef("");return g(()=>{let t=e.current;if(!t)return"";let r=t.innerText;if(n.current===r)return i.current;let s=pt(t).trim().toLowerCase();return n.current=r,i.current=s,s})}var vt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(vt||{}),bt=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(bt||{}),mt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(mt||{}),xt=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetOptionsElement=8]="SetOptionsElement",e))(xt||{});function se(e,n=i=>i){let i=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,t=Xe(n(e.options.slice()),s=>s.dataRef.current.domRef.current),r=i?t.indexOf(i):null;return r===-1&&(r=null),{options:t,activeOptionIndex:r}}let gt={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1,__demoMode:!1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let n=e.activeOptionIndex,{isSelected:i}=e.dataRef.current,t=e.options.findIndex(r=>i(r.dataRef.current.value));return t!==-1&&(n=t),{...e,listboxState:0,activeOptionIndex:n,__demoMode:!1}},2(e,n){var i,t,r,s,v;if(e.dataRef.current.disabled||e.listboxState===1)return e;let f={...e,searchQuery:"",activationTrigger:(i=n.trigger)!=null?i:1,__demoMode:!1};if(n.focus===R.Nothing)return{...f,activeOptionIndex:null};if(n.focus===R.Specific)return{...f,activeOptionIndex:e.options.findIndex(c=>c.id===n.id)};if(n.focus===R.Previous){let c=e.activeOptionIndex;if(c!==null){let p=e.options[c].dataRef.current.domRef,S=le(n,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(S!==null){let m=e.options[S].dataRef.current.domRef;if(((t=p.current)==null?void 0:t.previousElementSibling)===m.current||((r=m.current)==null?void 0:r.previousElementSibling)===null)return{...f,activeOptionIndex:S}}}}else if(n.focus===R.Next){let c=e.activeOptionIndex;if(c!==null){let p=e.options[c].dataRef.current.domRef,S=le(n,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.current.disabled});if(S!==null){let m=e.options[S].dataRef.current.domRef;if(((s=p.current)==null?void 0:s.nextElementSibling)===m.current||((v=m.current)==null?void 0:v.nextElementSibling)===null)return{...f,activeOptionIndex:S}}}}let u=se(e),O=le(n,{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled});return{...f,...u,activeOptionIndex:O}},3:(e,n)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let i=e.searchQuery!==""?0:1,t=e.searchQuery+n.value.toLowerCase(),r=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+i).concat(e.options.slice(0,e.activeOptionIndex+i)):e.options).find(v=>{var f;return!v.dataRef.current.disabled&&((f=v.dataRef.current.textValue)==null?void 0:f.startsWith(t))}),s=r?e.options.indexOf(r):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:t}:{...e,searchQuery:t,activeOptionIndex:s,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,n)=>{let i={id:n.id,dataRef:n.dataRef},t=se(e,r=>[...r,i]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(n.dataRef.current.value)&&(t.activeOptionIndex=t.options.indexOf(i)),{...e,...t}},6:(e,n)=>{let i=se(e,t=>{let r=t.findIndex(s=>s.id===n.id);return r!==-1&&t.splice(r,1),t});return{...e,...i,activationTrigger:1}},7:(e,n)=>e.buttonElement===n.element?e:{...e,buttonElement:n.element},8:(e,n)=>e.optionsElement===n.element?e:{...e,optionsElement:n.element}},ue=d.createContext(null);ue.displayName="ListboxActionsContext";function W(e){let n=d.useContext(ue);if(n===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,W),i}return n}let Z=d.createContext(null);Z.displayName="ListboxDataContext";function j(e){let n=d.useContext(Z);if(n===null){let i=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,j),i}return n}function Ot(e,n){return K(n.type,gt,e,n)}let St=d.Fragment;function ht(e,n){var i;let t=nt(),{value:r,defaultValue:s,form:v,name:f,onChange:u,by:O,invalid:c=!1,disabled:p=t||!1,horizontal:S=!1,multiple:m=!1,__demoMode:o=!1,...h}=e;const A=S?"horizontal":"vertical";let F=V(n),D=ot(s),[y=m?[]:void 0,P]=rt(r,u,D),[M,E]=d.useReducer(Ot,{dataRef:d.createRef(),listboxState:o?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:o}),k=d.useRef({static:!1,hold:!1}),_=d.useRef(new Map),x=it(O),T=d.useCallback(b=>K(a.mode,{1:()=>y.some(I=>x(I,b)),0:()=>x(y,b)}),[y]),a=d.useMemo(()=>({...M,value:y,disabled:p,invalid:c,mode:m?1:0,orientation:A,compare:x,isSelected:T,optionsPropsRef:k,listRef:_}),[y,p,c,m,M,_]);J(()=>{M.dataRef.current=a},[a]);let N=a.listboxState===0;Ge(N,[a.buttonElement,a.optionsElement],(b,I)=>{var w;E({type:1}),je(I,qe.Loose)||(b.preventDefault(),(w=a.buttonElement)==null||w.focus())});let Y=d.useMemo(()=>({open:a.listboxState===0,disabled:p,invalid:c,value:y}),[a,p,y,c]),ee=g(b=>{let I=a.options.find(w=>w.id===b);I&&H(I.dataRef.current.value)}),te=g(()=>{if(a.activeOptionIndex!==null){let{dataRef:b,id:I}=a.options[a.activeOptionIndex];H(b.current.value),E({type:2,focus:R.Specific,id:I})}}),ne=g(()=>E({type:0})),q=g(()=>E({type:1})),z=be(),oe=g((b,I,w)=>{z.dispose(),z.microTask(()=>b===R.Specific?E({type:2,focus:R.Specific,id:I,trigger:w}):E({type:2,focus:b,trigger:w}))}),re=g((b,I)=>(E({type:5,id:b,dataRef:I}),()=>E({type:6,id:b}))),H=g(b=>K(a.mode,{0(){return P==null?void 0:P(b)},1(){let I=a.value.slice(),w=I.findIndex(Ee=>x(Ee,b));return w===-1?I.push(b):I.splice(w,1),P==null?void 0:P(I)}})),ie=g(b=>E({type:3,value:b})),l=g(()=>E({type:4})),L=g(b=>{E({type:7,element:b})}),Q=g(b=>{E({type:8,element:b})}),ae=d.useMemo(()=>({onChange:H,registerOption:re,goToOption:oe,closeListbox:q,openListbox:ne,selectActiveOption:te,selectOption:ee,search:ie,clearSearch:l,setButtonElement:L,setOptionsElement:Q}),[]),[xe,ge]=at({inherit:!0}),Oe={ref:F},Se=d.useCallback(()=>{if(D!==void 0)return P==null?void 0:P(D)},[P,D]),he=G();return C.createElement(ge,{value:xe,props:{htmlFor:(i=a.buttonElement)==null?void 0:i.id},slot:{open:a.listboxState===0,disabled:p}},C.createElement(ze,null,C.createElement(ue.Provider,{value:ae},C.createElement(Z.Provider,{value:a},C.createElement(Je,{value:K(a.listboxState,{0:X.Open,1:X.Closed})},f!=null&&y!=null&&C.createElement(lt,{disabled:p,data:{[f]:y},form:v,onReset:Se}),he({ourProps:Oe,theirProps:h,slot:Y,defaultTag:St,name:"Listbox"}))))))}let Et="button";function Rt(e,n){var i;let t=j("Listbox.Button"),r=W("Listbox.Button"),s=d.useId(),v=Ze(),{id:f=v||`headlessui-listbox-button-${s}`,disabled:u=t.disabled||!1,autoFocus:O=!1,...c}=e,p=V(n,Re(),r.setButtonElement),S=ye(),m=g(a=>{switch(a.key){case $.Enter:Ye(a.currentTarget);break;case $.Space:case $.ArrowDown:a.preventDefault(),B.flushSync(()=>r.openListbox()),t.value||r.goToOption(R.First);break;case $.ArrowUp:a.preventDefault(),B.flushSync(()=>r.openListbox()),t.value||r.goToOption(R.Last);break}}),o=g(a=>{switch(a.key){case $.Space:a.preventDefault();break}}),h=g(a=>{var N;if(Ie(a.currentTarget))return a.preventDefault();t.listboxState===0?(B.flushSync(()=>r.closeListbox()),(N=t.buttonElement)==null||N.focus({preventScroll:!0})):(a.preventDefault(),r.openListbox())}),A=g(a=>a.preventDefault()),F=et([f]),D=tt(),{isFocusVisible:y,focusProps:P}=$e({autoFocus:O}),{isHovered:M,hoverProps:E}=De({isDisabled:u}),{pressed:k,pressProps:_}=Pe({disabled:u}),x=d.useMemo(()=>({open:t.listboxState===0,active:k||t.listboxState===0,disabled:u,invalid:t.invalid,value:t.value,hover:M,focus:y,autofocus:O}),[t.listboxState,t.value,u,M,y,k,t.invalid,O]),T=ve(S(),{ref:p,id:f,type:Le(e,t.buttonElement),"aria-haspopup":"listbox","aria-controls":(i=t.optionsElement)==null?void 0:i.id,"aria-expanded":t.listboxState===0,"aria-labelledby":F,"aria-describedby":D,disabled:u||void 0,autoFocus:O,onKeyDown:m,onKeyUp:o,onKeyPress:A,onClick:h},P,E,_);return G()({ourProps:T,theirProps:c,slot:x,defaultTag:Et,name:"Listbox.Button"})}let me=d.createContext(!1),yt="div",It=ce.RenderStrategy|ce.Static;function $t(e,n){var i,t;let r=d.useId(),{id:s=`headlessui-listbox-options-${r}`,anchor:v,portal:f=!1,modal:u=!0,transition:O=!1,...c}=e,p=Te(v),[S,m]=d.useState(null);p&&(f=!0);let o=j("Listbox.Options"),h=W("Listbox.Options"),A=Me(o.optionsElement),F=Ce(),[D,y]=we(O,S,F!==null?(F&X.Open)===X.Open:o.listboxState===0);Fe(D,o.buttonElement,h.closeListbox);let P=o.__demoMode?!1:u&&o.listboxState===0;ke(P,A);let M=o.__demoMode?!1:u&&o.listboxState===0;st(M,{allowed:d.useCallback(()=>[o.buttonElement,o.optionsElement],[o.buttonElement,o.optionsElement])});let E=o.listboxState!==0,k=ct(E,o.buttonElement)?!1:D,_=D&&o.listboxState===1,x=ut(_,o.value),T=g(l=>o.compare(x,l)),a=d.useMemo(()=>{var l;if(p==null||!((l=p==null?void 0:p.to)!=null&&l.includes("selection")))return null;let L=o.options.findIndex(Q=>T(Q.dataRef.current.value));return L===-1&&(L=0),L},[p,o.options]),N=(()=>{if(p==null)return;if(a===null)return{...p,inner:void 0};let l=Array.from(o.listRef.current.values());return{...p,inner:{listRef:{current:l},index:a}}})(),[Y,ee]=_e(N),te=Ae(),ne=V(n,p?Y:null,h.setOptionsElement,m),q=be();d.useEffect(()=>{var l;let L=o.optionsElement;L&&o.listboxState===0&&L!==((l=Be(L))==null?void 0:l.activeElement)&&(L==null||L.focus({preventScroll:!0}))},[o.listboxState,o.optionsElement]);let z=g(l=>{var L,Q;switch(q.dispose(),l.key){case $.Space:if(o.searchQuery!=="")return l.preventDefault(),l.stopPropagation(),h.search(l.key);case $.Enter:if(l.preventDefault(),l.stopPropagation(),o.activeOptionIndex!==null){let{dataRef:ae}=o.options[o.activeOptionIndex];h.onChange(ae.current.value)}o.mode===0&&(B.flushSync(()=>h.closeListbox()),(L=o.buttonElement)==null||L.focus({preventScroll:!0}));break;case K(o.orientation,{vertical:$.ArrowDown,horizontal:$.ArrowRight}):return l.preventDefault(),l.stopPropagation(),h.goToOption(R.Next);case K(o.orientation,{vertical:$.ArrowUp,horizontal:$.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),h.goToOption(R.Previous);case $.Home:case $.PageUp:return l.preventDefault(),l.stopPropagation(),h.goToOption(R.First);case $.End:case $.PageDown:return l.preventDefault(),l.stopPropagation(),h.goToOption(R.Last);case $.Escape:l.preventDefault(),l.stopPropagation(),B.flushSync(()=>h.closeListbox()),(Q=o.buttonElement)==null||Q.focus({preventScroll:!0});return;case $.Tab:l.preventDefault(),l.stopPropagation(),B.flushSync(()=>h.closeListbox()),Ne(o.buttonElement,l.shiftKey?de.Previous:de.Next);break;default:l.key.length===1&&(h.search(l.key),q.setTimeout(()=>h.clearSearch(),350));break}}),oe=(i=o.buttonElement)==null?void 0:i.id,re=d.useMemo(()=>({open:o.listboxState===0}),[o.listboxState]),H=ve(p?te():{},{id:s,ref:ne,"aria-activedescendant":o.activeOptionIndex===null||(t=o.options[o.activeOptionIndex])==null?void 0:t.id,"aria-multiselectable":o.mode===1?!0:void 0,"aria-labelledby":oe,"aria-orientation":o.orientation,onKeyDown:z,role:"listbox",tabIndex:o.listboxState===0?0:void 0,style:{...c.style,...ee,"--button-width":Ke(o.buttonElement,!0).width},...Qe(y)}),ie=G();return C.createElement(He,{enabled:f?e.static||D:!1},C.createElement(Z.Provider,{value:o.mode===1?o:{...o,isSelected:T}},ie({ourProps:H,theirProps:c,slot:re,defaultTag:yt,features:It,visible:k,name:"Listbox.Options"})))}let Dt="div";function Pt(e,n){let i=d.useId(),{id:t=`headlessui-listbox-option-${i}`,disabled:r=!1,value:s,...v}=e,f=d.useContext(me)===!0,u=j("Listbox.Option"),O=W("Listbox.Option"),c=u.activeOptionIndex!==null?u.options[u.activeOptionIndex].id===t:!1,p=u.isSelected(s),S=d.useRef(null),m=ft(S),o=Ue({disabled:r,value:s,domRef:S,get textValue(){return m()}}),h=V(n,S,x=>{x?u.listRef.current.set(t,x):u.listRef.current.delete(t)});J(()=>{if(!u.__demoMode&&u.listboxState===0&&c&&u.activationTrigger!==0)return Ve().requestAnimationFrame(()=>{var x,T;(T=(x=S.current)==null?void 0:x.scrollIntoView)==null||T.call(x,{block:"nearest"})})},[S,c,u.__demoMode,u.listboxState,u.activationTrigger,u.activeOptionIndex]),J(()=>{if(!f)return O.registerOption(t,o)},[o,t,f]);let A=g(x=>{var T;if(r)return x.preventDefault();O.onChange(s),u.mode===0&&(B.flushSync(()=>O.closeListbox()),(T=u.buttonElement)==null||T.focus({preventScroll:!0}))}),F=g(()=>{if(r)return O.goToOption(R.Nothing);O.goToOption(R.Specific,t)}),D=dt(),y=g(x=>{D.update(x),!r&&(c||O.goToOption(R.Specific,t,0))}),P=g(x=>{D.wasMoved(x)&&(r||c||O.goToOption(R.Specific,t,0))}),M=g(x=>{D.wasMoved(x)&&(r||c&&O.goToOption(R.Nothing))}),E=d.useMemo(()=>({active:c,focus:c,selected:p,disabled:r,selectedOption:p&&f}),[c,p,r,f]),k=f?{}:{id:t,ref:h,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":p,disabled:void 0,onClick:A,onFocus:F,onPointerEnter:y,onMouseEnter:y,onPointerMove:P,onMouseMove:P,onPointerLeave:M,onMouseLeave:M},_=G();return!p&&f?null:_({ourProps:k,theirProps:v,slot:E,defaultTag:Dt,name:"Listbox.Option"})}let Lt=d.Fragment;function Tt(e,n){let{options:i,placeholder:t,...r}=e,s={ref:V(n)},v=j("ListboxSelectedOption"),f=d.useMemo(()=>({}),[]),u=v.value===void 0||v.value===null||v.mode===1&&Array.isArray(v.value)&&v.value.length===0,O=G();return C.createElement(me.Provider,{value:!0},O({ourProps:s,theirProps:{...r,children:C.createElement(C.Fragment,null,t&&u?t:i)},slot:f,defaultTag:Lt,name:"ListboxSelectedOption"}))}let Mt=U(ht),Ct=U(Rt),wt=We,Ft=U($t),kt=U(Pt),_t=U(Tt),Kt=Object.assign(Mt,{Button:Ct,Label:wt,Options:Ft,Option:kt,SelectedOption:_t});export{Ft as G,Kt as M,Ct as N,kt as V,ft as a,ct as s};
