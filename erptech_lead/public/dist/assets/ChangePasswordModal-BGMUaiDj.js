import{j as s,a as i,B as n,I as f,G as v,P as a}from"./index-DcxHKUv5.js";import{u as F,o as N,c as P,a as x,b as C}from"./index.esm-CLL917j5.js";import{d as k,y as z,j as q,Y as R}from"./ConfirmModal-BZO7rHKY.js";import{F as S}from"./dynamicForms-DxAV7S_d.js";import{F as w}from"./LockClosedIcon-DZDvTktY.js";import{z as T,F as h}from"./transition-DUm2oeM_.js";const _=P().shape({password:x().required("Password is required").min(6,"Password must be at least 6 characters"),confirm_password:x().required("Confirm password is required").oneOf([C("password")],"Passwords must match")});function $({isOpen:y,onClose:d,userId:l,doctype:j}){var m,u;const{register:c,handleSubmit:b,formState:{errors:e},reset:p}=F({resolver:N(_),defaultValues:{password:"",confirm_password:""}}),r=k(t=>{t&&(d(),p())}),g=t=>{l&&r.mutate({doctype:j,body:{id:l,new_password:t.password}})},o=()=>{p(),d()};return s.jsx(T,{appear:!0,show:y,as:i.Fragment,children:s.jsxs(z,{as:"div",className:"fixed inset-0 z-[100] flex flex-col items-center justify-center overflow-hidden px-4 py-6 sm:px-5",onClose:o,children:[s.jsx(h,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"absolute inset-0 bg-gray-900/50 backdrop-blur transition-opacity dark:bg-black/40"})}),s.jsx(h,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(q,{className:"scrollbar-sm relative flex max-w-md w-full flex-col overflow-y-auto rounded-lg bg-white px-4 py-6 transition-opacity duration-300 dark:bg-dark-700 sm:px-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(R,{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Change Password"}),s.jsx(n,{variant:"flat",isIcon:!0,className:"size-7 rounded-full",onClick:o,children:s.jsx(S,{className:"size-4.5"})})]}),s.jsxs("form",{onSubmit:b(g),autoComplete:"off",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(f,{label:"New Password",type:"password",placeholder:"Enter new password",prefix:s.jsx(w,{className:"size-5 transition-colors duration-200",strokeWidth:"1"}),...c("password"),error:(m=e==null?void 0:e.password)==null?void 0:m.message}),s.jsx(f,{label:"Confirm Password",type:"password",placeholder:"Confirm new password",prefix:s.jsx(w,{className:"size-5 transition-colors duration-200",strokeWidth:"1"}),...c("confirm_password"),error:(u=e==null?void 0:e.confirm_password)==null?void 0:u.message})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx(n,{type:"button",variant:"outlined",color:"error",onClick:o,children:"Cancel"}),s.jsxs(n,{type:"submit",color:"primary",className:"space-x-2",disabled:r.isPending,children:[r.isPending&&s.jsx(v,{variant:"soft",className:"size-4 border-2"}),s.jsx("span",{children:"Update Password"})]})]})]})]})})]})})}$.propTypes={isOpen:a.bool.isRequired,onClose:a.func.isRequired,userId:a.string,doctype:a.string.isRequired};export{$ as C};
