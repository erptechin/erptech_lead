import{a as c,j as e,C as J,B as n,q as se,s as te,t as q,v as h,w as re,x as y,U as he,k as T,A as ye,J as ge,e as fe,u as be,l as ke,p as je,y as ve,S as Ne,I as Z,z as we}from"./index-CXdK2mEz.js";import{u as _e,o as Ce}from"./index.esm-D1RJ0A51.js";import{F as O,a as Se,b as De,S as Fe,D as X}from"./dynamicForms-C35dwID1.js";import{P as Ae}from"./Page--Dd8kzix.js";import{d as K,u as Te,b as Oe,c as Ee}from"./useApiHook-2VTEyIvN.js";import{F as le,C as Le}from"./CarProfiles-BxVSfiVE.js";import{z as _,F as g}from"./transition-BEPJcKhE.js";import{y as E,j as L}from"./iconBase-Y2Q2gnGj.js";import{F as Me}from"./DocumentPlusIcon-D6J6CxTR.js";import{H as Ue,G as ze,U as Re,K as Ie,j as $e}from"./combobox-DqEsV6Ex.js";import"./ConfirmModal-DzIkVamt.js";import"./Datepicker-BhO7Fdpf.js";import"./label-Be0Myku2.js";import"./useMutation-5Pnt-4Jl.js";import"./TrashIcon-BD_EzTt_.js";import"./floating-ui.dom-CtcSe9Ld.js";import"./active-element-history-qs8MhUG0.js";import"./hidden-3SG37ruh.js";import"./use-by-comparator-CH0z9RXZ.js";import"./calculate-active-index-7qBK-Oid.js";import"./use-tree-walker-DYFtQCAZ.js";import"./frozen-BUEIK5Ko.js";function Pe({title:u,titleId:l,...k},j){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:j,"aria-labelledby":l},k),u?c.createElement("title",{id:l},u):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const He=c.forwardRef(Pe);function Be({id:u,data:l,setValue:k,refetchData:j}){var b;const[f,o]=c.useState(!1),[t,x]=c.useState({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]}),a=K(i=>{i&&f&&(o(!1),j())}),C=()=>{if(t.description&&t.description.trim()&&t.next_date){const i=(l==null?void 0:l.custom_followup_history)||[],p=[...i,{...t,idx:i.length+1}];a.mutate({doctype:"Lead",body:{id:u,custom_followup_history:p,custom_next_follow_up_date:t.next_date,custom_lead_status:"Call Back"}}),k("custom_followup_history",p),x({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})}};return u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx(J,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Follow-up History Records"}),e.jsxs(n,{onClick:()=>o(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(le,{className:"size-4"}),"Add New Record"]})]}),l!=null&&l.custom_followup_history&&((b=l==null?void 0:l.custom_followup_history)==null?void 0:b.length)>0?e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(se,{hoverable:!0,className:"w-full min-w-[600px] text-left rtl:text-right",children:[e.jsx(te,{children:e.jsxs(q,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Created Date"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Description"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Next Follow-up Date"})]})}),e.jsx(re,{children:l==null?void 0:l.custom_followup_history.map((i,p)=>e.jsxs(q,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:p+1}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:i.created_date?new Date(i.created_date).toLocaleDateString():"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:i.description||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:i.next_date?new Date(i.next_date).toLocaleDateString():"-"})]},p))})]})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No follow-up records yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(_,{appear:!0,show:f,as:E,onClose:()=>o(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Follow-up History"}),e.jsx("button",{onClick:()=>o(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:t.description,onChange:i=>x({...t,description:i.target.value}),placeholder:"Enter follow-up description...",rows:"4",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Created Date"}),e.jsx("input",{type:"date",value:t.created_date,onChange:i=>x({...t,created_date:i.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["Next Follow-up Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:t.next_date,onChange:i=>x({...t,next_date:i.target.value}),className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50",required:!0})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(n,{variant:"outlined",onClick:()=>{o(!1),x({description:"",next_date:"",created_date:new Date().toISOString().split("T")[0]})},children:"Cancel"}),e.jsx(n,{color:"primary",onClick:C,disabled:!t.description||!t.description.trim()||!t.next_date,children:"Add Record"})]})]})})]})]}):null}function Je({id:u,data:l,setValue:k,refetchData:j}){var p;const[f,o]=c.useState(!1),[t,x]=c.useState({document_type:"",file_attachment:"",comments:""}),a=[{label:"Car Mulkiya",value:"Car Mulkiya"},{label:"Driving License",value:"Driving License"},{label:"Emirates ID",value:"Emirates ID"},{label:"Invoice",value:"Invoice"},{label:"Credit Note",value:"Credit Note"},{label:"Debit Note",value:"Debit Note"},{label:"Car Passing",value:"Car Passing"}],C=K(d=>{d&&f&&(o(!1),j())}),b=d=>{const m=new Date(d),M=m.getFullYear(),U=String(m.getMonth()+1).padStart(2,"0"),z=String(m.getDate()).padStart(2,"0"),R=String(m.getHours()).padStart(2,"0"),S=String(m.getMinutes()).padStart(2,"0"),v=String(m.getSeconds()).padStart(2,"0");return`${M}-${U}-${z} ${R}:${S}:${v}`},i=()=>{if(t.document_type&&t.file_attachment){const d=(l==null?void 0:l.cod_documents)||[],m=[...d,{...t,upload_date:b(new Date),idx:d.length+1}];C.mutate({doctype:"Lead",body:{id:u,cod_documents:m}}),k("cod_documents",m),x({document_type:"",file_attachment:"",comments:""})}};return u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 lg:col-span-12",children:e.jsx(J,{className:"p-4 sm:px-5",children:e.jsxs("div",{className:"mt-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Documents"}),e.jsxs(n,{onClick:()=>o(!0),color:"primary",className:"flex items-center gap-2",children:[e.jsx(le,{className:"size-4"}),"Add New Record"]})]}),l!=null&&l.cod_documents&&((p=l==null?void 0:l.cod_documents)==null?void 0:p.length)>0?e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:e.jsxs(se,{hoverable:!0,className:"w-full min-w-[700px] text-left rtl:text-right",children:[e.jsx(te,{children:e.jsxs(q,{className:"border-y border-transparent border-b-gray-200 dark:border-b-dark-500",children:[e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"#"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Document Type"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"File Attachment"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Upload Date"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Status"}),e.jsx(h,{className:"bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100",children:"Comments"})]})}),e.jsx(re,{children:l==null?void 0:l.cod_documents.map((d,m)=>e.jsxs(q,{className:"border-b border-gray-200 dark:border-dark-500",children:[e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:m+1}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.document_type||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.file_attachment?e.jsx("a",{href:d.file_attachment,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline dark:text-blue-400",children:"View File"}):"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.upload_date?new Date(d.upload_date).toLocaleDateString():"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.status||"-"}),e.jsx(y,{className:"text-gray-700 dark:text-dark-200",children:d.comments||"-"})]},m))})]})})}):e.jsx("div",{className:"flex flex-col items-center justify-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-dark-300",children:'No documents yet. Click "Add New Record" to add one.'})})]})})}),e.jsxs(_,{appear:!0,show:f,as:E,onClose:()=>o(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Add Document"}),e.jsx("button",{onClick:()=>o(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(Se,{label:e.jsxs(e.Fragment,{children:["Document Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),lists:a,value:t.document_type,onChange:d=>x({...t,document_type:d||""}),placeholder:"Select Document Type"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:["File Attachment ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(he,{onChange:d=>{d&&x({...t,file_attachment:d})},children:({...d})=>e.jsxs(n,{...d,unstyled:!0,className:T("mt-3 w-full shrink-0 flex-col rounded-lg border-2 border-dashed py-10 border-gray-300 dark:border-dark-450"),children:[e.jsx(De,{className:"size-12"}),e.jsxs("span",{className:T("pointer-events-none mt-2 text-gray-600 dark:text-dark-200"),children:[e.jsx("span",{className:"text-primary-600 dark:text-primary-400",children:"Browse"}),e.jsx("span",{children:" or drop your files here"})]}),t.file_attachment&&e.jsx("span",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:"File selected"})]})}),t.file_attachment&&e.jsx("div",{className:"mt-2 flex flex-col space-y-4",children:e.jsx("div",{className:"relative inline-block",children:e.jsx(ye,{size:24,src:`${ge}${t.file_attachment}`,classNames:{display:"rounded-lg"}})})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Comments"}),e.jsx("textarea",{value:t.comments,onChange:d=>x({...t,comments:d.target.value}),placeholder:"Enter comments...",rows:"3",className:"w-full rounded-lg border border-gray-300 px-3 py-2 dark:border-dark-400 dark:bg-dark-500 dark:text-dark-50"})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(n,{variant:"outlined",onClick:()=>{o(!1),x({document_type:"",file_attachment:"",comments:""})},children:"Cancel"}),e.jsx(n,{color:"primary",onClick:i,disabled:!t.document_type||!t.file_attachment,children:"Add Document"})]})]})})]})]}):null}const ee="Lead",w="Lead",H=["first_name","last_name","email_id","mobile_no"],B=["custom_assigned_user","custom_lead_status","custom_next_follow_up_date","source","custom_followup_history","cod_documents"],ae={ignorFields:{status:!0,custom_followup_history:!0,cod_documents:!0}};function ua(){const{user:{role_profile_name:u}}=fe(),{isDark:l,darkColorScheme:k,lightColorScheme:j}=be(),f=ke(),{id:o}=je(),{data:t,isFetching:x}=Te({doctype:w,fields:JSON.stringify([...H,...B])}),{data:a,isFetching:C,refetch:b}=Oe({doctype:w,id:o,fields:JSON.stringify([...H,...B])}),i=Ee(s=>{s&&(z(),f(-1))}),p=K(s=>{s&&(z(),f(-1))}),{register:d,handleSubmit:m,formState:{errors:M},control:U,reset:z,setValue:R}=_e({resolver:Ce(Fe(t==null?void 0:t.fields,["status"])),values:o?a:{},defaultValues:Object.fromEntries([...H,...B].map(s=>[s,""]))}),[S,v]=c.useState(!1),[oe,I]=c.useState(!1),[de,D]=c.useState(!1),[F,A]=c.useState({custom_assigned_user:"",custom_policy_number:""}),[$,P]=c.useState(""),[Q,ie]=c.useState([]),[ne,V]=c.useState(null),G=["Car Mulkiya","Driving License","Emirates ID","Invoice","Credit Note","Debit Note","Car Passing"],W=(()=>{if(!(a!=null&&a.cod_documents)||a.cod_documents.length===0)return!1;const s=a.cod_documents.map(r=>r.document_type).filter(r=>r&&r.trim()!=="");return G.every(r=>s.includes(r))})();c.useEffect(()=>{S&&(a!=null&&a.custom_policy_number&&A(s=>({...s,custom_policy_number:a.custom_policy_number||""})),ve({doctype:"User",fields:JSON.stringify(["name","full_name","email"]),filters:JSON.stringify([["role_profile_name","=","Lead Manager"]]),page_length:100}).then(s=>{s!=null&&s.data&&ie(s.data.map(r=>({label:r.full_name||r.name,value:r.name,email:r.email})))}))},[S,a==null?void 0:a.custom_policy_number]);const Y=$===""?Q:Q.filter(s=>{var r;return s.label.toLowerCase().replace(/\s+/g,"").includes($.toLowerCase().replace(/\s+/g,""))||((r=s.email)==null?void 0:r.toLowerCase().includes($.toLowerCase()))}),ce=()=>{if(o&&W){const s={id:o,custom_assigned_user:F.custom_assigned_user,custom_policy_number:F.custom_policy_number,custom_lead_status:"CEO Approval"};p.mutate({doctype:w,body:s}),v(!1),A({custom_assigned_user:"",custom_policy_number:""}),V(null),P("")}},me=()=>{D(!0)},xe=()=>{if(o){const s={id:o,custom_lead_status:"Approved"};p.mutate({doctype:w,body:s},{onSuccess:()=>{D(!1),I(!0),b()}})}},pe=s=>{const r={...s,status:o?s.status:"Open"};o?p.mutate({doctype:w,body:{...r,id:o}}):i.mutate({doctype:w,body:r})};return x||C?e.jsx(Ne,{style:{"--sk-color":l?k[700]:j[300]}}):e.jsx(Ae,{title:(o?"Edit ":"New ")+ee,children:e.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"size-6"}),e.jsxs("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:[o?"Edit":"New"," ",ee]})]}),e.jsxs("div",{className:"flex gap-2",children:[o&&u==="Lead Manager"&&(a==null?void 0:a.custom_lead_status)==="CEO Approval"&&e.jsx(n,{className:"min-w-[7rem]",variant:"outlined",color:"primary",onClick:me,children:"Make Approved"}),o&&u==="Lead User"&&(a==null?void 0:a.custom_lead_status)!=="Approved"&&e.jsx(n,{className:"min-w-[7rem]",variant:"outlined",color:"primary",onClick:()=>v(!0),disabled:(a==null?void 0:a.custom_lead_status)==="CEO Approval",children:(a==null?void 0:a.custom_lead_status)==="CEO Approval"?"Waiting For Approval":" Submit For CEO Approval"}),e.jsx(n,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>f(-1),children:"Back"}),e.jsx(n,{className:"min-w-[7rem]",color:"primary",type:"submit",form:"new-post-form",children:"Save"})]})]}),e.jsxs("form",{autoComplete:"off",onSubmit:m(pe),id:"new-post-form",children:[e.jsxs("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:[e.jsx(Je,{id:o,data:a,setValue:R,refetchData:b}),e.jsx(Be,{id:o,data:a,setValue:R,refetchData:b}),e.jsx("div",{className:"col-span-12 lg:col-span-7",children:e.jsx(J,{className:"p-4 sm:px-5",children:e.jsx("div",{className:"mt-5 space-y-5",children:e.jsx(X,{infos:t,fields:H,register:d,tables:ae,control:U,errors:M})})})}),e.jsx("div",{className:"col-span-12 space-y-4 sm:space-y-5 lg:col-span-5 lg:space-y-6",children:e.jsx(J,{className:"p-4 sm:px-5",children:e.jsx(X,{infos:t,tables:ae,fields:B,register:d,control:U,errors:M})})})]}),o&&e.jsx("div",{className:"mt-6",children:e.jsx(Le,{leadId:o,leadName:(a==null?void 0:a.lead_name)||(a==null?void 0:a.name)})})]}),e.jsxs(_,{appear:!0,show:S,as:E,onClose:()=>v(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-lg flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Submit For CEO Approval"}),e.jsx("button",{onClick:()=>v(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Assign User"}),e.jsx(Ue,{value:ne,onChange:s=>{V(s),A({...F,custom_assigned_user:(s==null?void 0:s.value)||""})},children:({open:s})=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative w-full cursor-pointer overflow-hidden",children:e.jsx(ze,{as:Z,autoComplete:"off",displayValue:r=>(r==null?void 0:r.label)||"",onChange:r=>P(r.target.value),placeholder:"Select User",suffix:e.jsx(Re,{children:e.jsx(we,{className:T("size-5 transition-transform",s&&"rotate-180"),"aria-hidden":"true"})})})}),e.jsx(_,{as:"div",enter:"transition ease-out",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",afterLeave:()=>P(""),children:e.jsx(Ie,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-y-auto overflow-x-hidden rounded-lg border border-gray-300 bg-white py-1 shadow-lg shadow-gray-200/50 outline-hidden focus-visible:outline-hidden dark:border-dark-500 dark:bg-dark-750 dark:shadow-none",children:Y.length===0&&$!==""?e.jsx("div",{className:"relative cursor-default select-none px-4 py-2 text-gray-800 dark:text-dark-100",children:"Nothing found"}):Y.map(r=>e.jsx($e,{className:({selected:N,active:ue})=>T("relative cursor-pointer select-none px-4 py-2 outline-hidden transition-colors",ue&&!N&&"bg-gray-100 dark:bg-dark-600",N?"bg-primary-600 text-white dark:bg-primary-500":"text-gray-800 dark:text-dark-100"),value:r,children:({selected:N})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:r.label}),r.email&&e.jsx("span",{className:T("text-xs",N?"text-primary-100":"text-gray-500 dark:text-dark-300"),children:r.email})]})},r.value))})})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-dark-100",children:"Policy Number"}),e.jsx(Z,{type:"text",value:F.custom_policy_number,onChange:s=>A({...F,custom_policy_number:s.target.value}),placeholder:"Enter Policy Number",autoComplete:"off"})]}),!W&&e.jsxs("div",{className:"rounded-lg bg-yellow-50 border border-yellow-200 p-3 dark:bg-yellow-900/20 dark:border-yellow-800",children:[e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"Warning:"})," All required document types must be uploaded before submitting for CEO approval."]}),e.jsxs("p",{className:"text-xs mt-1 text-yellow-700 dark:text-yellow-300",children:["Missing: ",G.filter(s=>{var r;return!((r=a==null?void 0:a.cod_documents)!=null&&r.some(N=>N.document_type===s))}).join(", ")]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(n,{variant:"outlined",onClick:()=>{v(!1),A({custom_assigned_user:"",custom_policy_number:""}),V(null),P("")},children:"Cancel"}),e.jsx(n,{color:"primary",onClick:ce,disabled:!W,children:"Submit For Approval"})]})]})})]}),e.jsxs(_,{appear:!0,show:de,as:E,onClose:()=>D(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-md flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Confirm Approval"}),e.jsx("button",{onClick:()=>D(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-base text-gray-700 dark:text-dark-200",children:"Are you sure you want to approve this lead?"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-dark-300",children:'This action will change the lead status to "Approved".'})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx(n,{variant:"outlined",onClick:()=>D(!1),children:"No"}),e.jsx(n,{color:"primary",onClick:xe,children:"Yes"})]})]})})]}),e.jsxs(_,{appear:!0,show:oe,as:E,onClose:()=>I(!1),children:[e.jsx(g,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"fixed inset-0 bg-gray-900/50 transition-opacity dark:bg-black/40"}),e.jsx(g,{as:L,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",className:"fixed inset-0 z-100 flex items-center justify-center overflow-hidden px-4 py-6 sm:px-5",children:e.jsxs("div",{className:"scrollbar-sm relative flex w-full max-w-md flex-col rounded-lg bg-white transition-opacity duration-300 dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-5 py-4 dark:border-dark-500",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Success"}),e.jsx("button",{onClick:()=>I(!1),className:"rounded-lg p-1.5 hover:bg-gray-100 dark:hover:bg-dark-600",children:e.jsx(O,{className:"size-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx(He,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-dark-50",children:"Lead Approved Successfully"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-dark-300",children:'The lead status has been updated to "Approved".'})]})]})}),e.jsx("div",{className:"flex items-center justify-end gap-3 border-t border-gray-200 px-5 py-4 dark:border-dark-500",children:e.jsx(n,{color:"primary",onClick:()=>{I(!1),b()},children:"OK"})})]})})]})]})})}export{ua as default};
