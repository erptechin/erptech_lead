import{a as n,R as L,u as xe,j as t,S as Ee,B as U,C as he,x as $e,h as ie,k as Ae,I as Ve,e as V,l as _e,n as He,o as oe,p as Le,q as Oe,s as ze,t as Be,f as Ge}from"./index-LumR9LpT.js";import{G as ee,y as Ue,j as qe}from"./iconBase-C2Zgi-_E.js";import{P as te}from"./Page-DpNZoU2W.js";import{u as We,a as Je,b as Ke,C as Ze,c as Qe,F as Ye,f as D,T as Xe,d as De,S as et,e as tt,P as rt,g as st,h as lt,i as nt,j as ce,k as at,l as it,m as ot,n as ct}from"./columns-BG8kI-sp.js";import{g as dt}from"./getUserAgentBrowser-D8cp01Zu.js";import{u as be,b as ut,c as mt,d as ft,a as pt}from"./useApiHook-BaTdZUfY.js";import{u as gt,o as xt}from"./index.esm-DDFq6ecG.js";import{S as ht,D as bt}from"./SearchSelect-CYt5ySf9.js";import{F as yt}from"./Highlight-Dtxfk7uU.js";import{f as vt,K as q,s as Z,y as W,o as _,n as Y,_ as B,L as J,$ as ye,a as ve,u as G,T as Q,b as wt,c as N,P as H,F as I,t as St,d as jt,w as Ct,e as kt,O as de,z as Ft,g as ue}from"./transition-Bjlj-wUW.js";import{f as we,s as Pt}from"./hidden-L3KgzKsU.js";import"./active-element-history-BpgmnmLd.js";import"./Datepicker-DYSyDBji.js";import"./XMarkIcon-D_rqfLFY.js";import"./listbox-rmOD_dFQ.js";import"./use-by-comparator-DvNQncvR.js";import"./use-text-value-DvuwZjGX.js";import"./calculate-active-index-P522dhW6.js";import"./frozen-Chw8VnFV.js";import"./label-Bynhy_B1.js";import"./ConfirmModal-DS6DE1gB.js";import"./menu-D4F3Xua-.js";import"./PencilIcon-BGkhw6mS.js";import"./useMutation-DIthQpx-.js";import"./combobox-Dj5cFH08.js";import"./floating-ui.dom-CtcSe9Ld.js";function Nt({onFocus:e}){let[r,s]=n.useState(!0),l=vt();return r?L.createElement(we,{as:"button",type:"button",features:Pt.Focusable,onFocus:i=>{i.preventDefault();let u,o=50;function p(){if(o--<=0){u&&cancelAnimationFrame(u);return}if(e()){if(cancelAnimationFrame(u),!l.current)return;s(!1);return}u=requestAnimationFrame(p)}u=requestAnimationFrame(p)}}):null}const Se=n.createContext(null);function It(){return{groups:new Map,get(e,r){var s;let l=this.groups.get(e);l||(l=new Map,this.groups.set(e,l));let i=(s=l.get(r))!=null?s:0;l.set(r,i+1);let u=Array.from(l.keys()).indexOf(r);function o(){let p=l.get(r);p>1?l.set(r,p-1):l.delete(r)}return[u,o]}}}function Tt({children:e}){let r=n.useRef(It());return n.createElement(Se.Provider,{value:r},e)}function je(e){let r=n.useContext(Se);if(!r)throw new Error("You must wrap your component in a <StableCollection>");let s=n.useId(),[l,i]=r.current.get(e,s);return n.useEffect(()=>i,[]),l}var Rt=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Rt||{}),Mt=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Mt||{}),Et=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Et||{});let $t={0(e,r){var s;let l=B(e.tabs,a=>a.current),i=B(e.panels,a=>a.current),u=l.filter(a=>{var S;return!((S=a.current)!=null&&S.hasAttribute("disabled"))}),o={...e,tabs:l,panels:i};if(r.index<0||r.index>l.length-1){let a=G(Math.sign(r.index-e.selectedIndex),{[-1]:()=>1,0:()=>G(Math.sign(r.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(u.length===0)return o;let S=G(a,{0:()=>l.indexOf(u[0]),1:()=>l.indexOf(u[u.length-1])});return{...o,selectedIndex:S===-1?e.selectedIndex:S}}let p=l.slice(0,r.index),C=[...l.slice(r.index),...p].find(a=>u.includes(a));if(!C)return o;let v=(s=l.indexOf(C))!=null?s:e.selectedIndex;return v===-1&&(v=e.selectedIndex),{...o,selectedIndex:v}},1(e,r){if(e.tabs.includes(r.tab))return e;let s=e.tabs[e.selectedIndex],l=B([...e.tabs,r.tab],u=>u.current),i=e.selectedIndex;return e.info.current.isControlled||(i=l.indexOf(s),i===-1&&(i=e.selectedIndex)),{...e,tabs:l,selectedIndex:i}},2(e,r){return{...e,tabs:e.tabs.filter(s=>s!==r.tab)}},3(e,r){return e.panels.includes(r.panel)?e:{...e,panels:B([...e.panels,r.panel],s=>s.current)}},4(e,r){return{...e,panels:e.panels.filter(s=>s!==r.panel)}}},re=n.createContext(null);re.displayName="TabsDataContext";function O(e){let r=n.useContext(re);if(r===null){let s=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,O),s}return r}let se=n.createContext(null);se.displayName="TabsActionsContext";function le(e){let r=n.useContext(se);if(r===null){let s=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,le),s}return r}function At(e,r){return G(r.type,$t,e,r)}let Vt="div";function _t(e,r){let{defaultIndex:s=0,vertical:l=!1,manual:i=!1,onChange:u,selectedIndex:o=null,...p}=e;const C=l?"vertical":"horizontal",v=i?"manual":"auto";let a=o!==null,S=Z({isControlled:a}),F=W(r),[m,g]=n.useReducer(At,{info:S,selectedIndex:o??s,tabs:[],panels:[]}),j=n.useMemo(()=>({selectedIndex:m.selectedIndex}),[m.selectedIndex]),T=Z(u||(()=>{})),k=Z(m.tabs),h=n.useMemo(()=>({orientation:C,activation:v,...m}),[C,v,m]),P=_(b=>(g({type:1,tab:b}),()=>g({type:2,tab:b}))),R=_(b=>(g({type:3,panel:b}),()=>g({type:4,panel:b}))),f=_(b=>{w.current!==b&&T.current(b),a||g({type:0,index:b})}),w=Z(a?e.selectedIndex:m.selectedIndex),M=n.useMemo(()=>({registerTab:P,registerPanel:R,change:f}),[]);Y(()=>{g({type:0,index:o??s})},[o]),Y(()=>{if(w.current===void 0||m.tabs.length<=0)return;let b=B(m.tabs,y=>y.current);b.some((y,c)=>m.tabs[c]!==y)&&f(b.indexOf(m.tabs[w.current]))});let z={ref:F},$=J();return L.createElement(Tt,null,L.createElement(se.Provider,{value:M},L.createElement(re.Provider,{value:h},h.tabs.length<=0&&L.createElement(Nt,{onFocus:()=>{var b,y;for(let c of k.current)if(((b=c.current)==null?void 0:b.tabIndex)===0)return(y=c.current)==null||y.focus(),!0;return!1}}),$({ourProps:z,theirProps:p,slot:j,defaultTag:Vt,name:"Tabs"}))))}let Ht="div";function Lt(e,r){let{orientation:s,selectedIndex:l}=O("Tab.List"),i=W(r),u=n.useMemo(()=>({selectedIndex:l}),[l]),o=e,p={ref:i,role:"tablist","aria-orientation":s};return J()({ourProps:p,theirProps:o,slot:u,defaultTag:Ht,name:"Tabs.List"})}let Ot="button";function zt(e,r){var s,l;let i=n.useId(),{id:u=`headlessui-tabs-tab-${i}`,disabled:o=!1,autoFocus:p=!1,...C}=e,{orientation:v,activation:a,selectedIndex:S,tabs:F,panels:m}=O("Tab"),g=le("Tab"),j=O("Tab"),[T,k]=n.useState(null),h=n.useRef(null),P=W(h,r,k);Y(()=>g.registerTab(h),[g,h]);let R=je("tabs"),f=F.indexOf(h);f===-1&&(f=R);let w=f===S,M=_(x=>{var E;let K=x();if(K===Q.Success&&a==="auto"){let Re=(E=wt(h))==null?void 0:E.activeElement,ae=j.tabs.findIndex(Me=>Me.current===Re);ae!==-1&&g.change(ae)}return K}),z=_(x=>{let E=F.map(K=>K.current).filter(Boolean);if(x.key===N.Space||x.key===N.Enter){x.preventDefault(),x.stopPropagation(),g.change(f);return}switch(x.key){case N.Home:case N.PageUp:return x.preventDefault(),x.stopPropagation(),M(()=>H(E,I.First));case N.End:case N.PageDown:return x.preventDefault(),x.stopPropagation(),M(()=>H(E,I.Last))}if(M(()=>G(v,{vertical(){return x.key===N.ArrowUp?H(E,I.Previous|I.WrapAround):x.key===N.ArrowDown?H(E,I.Next|I.WrapAround):Q.Error},horizontal(){return x.key===N.ArrowLeft?H(E,I.Previous|I.WrapAround):x.key===N.ArrowRight?H(E,I.Next|I.WrapAround):Q.Error}}))===Q.Success)return x.preventDefault()}),$=n.useRef(!1),b=_(()=>{var x;$.current||($.current=!0,(x=h.current)==null||x.focus({preventScroll:!0}),g.change(f),St(()=>{$.current=!1}))}),y=_(x=>{x.preventDefault()}),{isFocusVisible:c,focusProps:d}=ye({autoFocus:p}),{isHovered:A,hoverProps:X}=jt({isDisabled:o}),{pressed:ne,pressProps:Ne}=Ct({disabled:o}),Ie=n.useMemo(()=>({selected:w,hover:A,active:ne,focus:c,autofocus:p,disabled:o}),[w,A,c,ne,p,o]),Te=ve({ref:P,onKeyDown:z,onMouseDown:y,onClick:b,id:u,role:"tab",type:kt(e,T),"aria-controls":(l=(s=m[f])==null?void 0:s.current)==null?void 0:l.id,"aria-selected":w,tabIndex:w?0:-1,disabled:o||void 0,autoFocus:p},d,X,Ne);return J()({ourProps:Te,theirProps:C,slot:Ie,defaultTag:Ot,name:"Tabs.Tab"})}let Bt="div";function Gt(e,r){let{selectedIndex:s}=O("Tab.Panels"),l=W(r),i=n.useMemo(()=>({selectedIndex:s}),[s]),u=e,o={ref:l};return J()({ourProps:o,theirProps:u,slot:i,defaultTag:Bt,name:"Tabs.Panels"})}let Ut="div",qt=de.RenderStrategy|de.Static;function Wt(e,r){var s,l,i,u;let o=n.useId(),{id:p=`headlessui-tabs-panel-${o}`,tabIndex:C=0,...v}=e,{selectedIndex:a,tabs:S,panels:F}=O("Tab.Panel"),m=le("Tab.Panel"),g=n.useRef(null),j=W(g,r);Y(()=>m.registerPanel(g),[m,g]);let T=je("panels"),k=F.indexOf(g);k===-1&&(k=T);let h=k===a,{isFocusVisible:P,focusProps:R}=ye(),f=n.useMemo(()=>({selected:h,focus:P}),[h,P]),w=ve({ref:j,id:p,role:"tabpanel","aria-labelledby":(l=(s=S[k])==null?void 0:s.current)==null?void 0:l.id,tabIndex:h?C:-1},R),M=J();return!h&&((i=v.unmount)==null||i)&&!((u=v.static)!=null&&u)?L.createElement(we,{"aria-hidden":"true",...w}):M({ourProps:w,theirProps:v,slot:f,defaultTag:Ut,features:qt,visible:h,name:"Tabs.Panel"})}let Jt=q(zt),Ce=q(_t),ke=q(Lt),Fe=q(Gt),Pe=q(Wt),Kt=Object.assign(Jt,{Group:Ce,List:ke,Panels:Fe,Panel:Pe});function Zt(e){return ee({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"rect",attr:{x:"7",y:"4",fill:"#BBDEFB",width:"34",height:"40"},child:[]},{tag:"g",attr:{fill:"#2196F3"},child:[{tag:"rect",attr:{x:"13",y:"26",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"13",y:"18",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"13",y:"34",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"13",y:"10",width:"4",height:"4"},child:[]},{tag:"rect",attr:{x:"21",y:"26",width:"14",height:"4"},child:[]},{tag:"rect",attr:{x:"21",y:"18",width:"14",height:"4"},child:[]},{tag:"rect",attr:{x:"21",y:"34",width:"14",height:"4"},child:[]},{tag:"rect",attr:{x:"21",y:"10",width:"14",height:"4"},child:[]}]}]})(e)}function me(e){return ee({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 6H3"},child:[]},{tag:"path",attr:{d:"M21 12H8"},child:[]},{tag:"path",attr:{d:"M21 18H8"},child:[]},{tag:"path",attr:{d:"M3 12v6"},child:[]}]})(e)}function fe(e){return ee({attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"rect",attr:{x:"7",y:"5.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"3.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"13.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"1.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"13",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"5",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"3",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"9",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"11",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"9.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"7",y:"11.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"rect",attr:{x:"1",y:"7.025",width:"1",height:"1",rx:".5",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1 1.49994C1 1.2238 1.22386 0.999939 1.5 0.999939H6V1.99994H2V5.99994H1V1.49994ZM13 1.99994H9V0.999939H13.5C13.7761 0.999939 14 1.2238 14 1.49994V5.99994H13V1.99994ZM1 13.4999V8.99994H2V12.9999H6V13.9999H1.5C1.22386 13.9999 1 13.7761 1 13.4999ZM13 12.9999V8.99994H14V13.4999C14 13.7761 13.7761 13.9999 13.5 13.9999H9.5V12.9999H13Z",fill:"currentColor"},child:[]}]})(e)}function Qt({onClose:e,id:r,rootData:s}){const{isDark:l,darkColorScheme:i,lightColorScheme:u}=xe(),o=s.options,[p,C]=n.useState([]),v=Object.fromEntries([...p].map(f=>[f,""])),{data:a,isLoading:S}=be({doctype:o}),{data:F,isLoading:m}=ut({doctype:o,id:r,fields:JSON.stringify(p)});n.useEffect(()=>{if(a!=null&&a.fields){const f=a.fields.filter(w=>w.read_only===0&&w.reqd).map(w=>w.fieldname);C(f)}},[a]);const g=mt(f=>{f&&e({value:f.name,label:f[s==null?void 0:s.title_field]})}),j=ft(f=>{f&&e({value:f.name,label:f[s==null?void 0:s.title_field]})}),{register:T,handleSubmit:k,formState:{errors:h},control:P}=gt({resolver:xt(ht(a==null?void 0:a.fields)),values:r?F:v}),R=f=>{r?j.mutate({doctype:o,body:{...f,id:r}}):g.mutate({doctype:o,body:f})};return r&&m||S?t.jsx(Ee,{style:{"--sk-color":l?i[700]:u[300]}}):(console.log(h),t.jsx(te,{title:"New Post Form",children:t.jsxs("div",{className:"transition-content px-10 pb-6",children:[t.jsxs("div",{className:"space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-6",children:[t.jsx("div",{className:"items-center gap-1",children:t.jsxs("h2",{className:"line-clamp-1 text-xl mb-5 font-medium text-gray-700 dark:text-dark-50",children:["Add New ",o]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>e(),children:"Close"}),t.jsx(U,{className:"min-w-[7rem]",color:"primary",type:"button",onClick:k(R),form:"new-sub-post-form",children:"Save"})]})]}),t.jsx("form",{autoComplete:"off",id:"new-sub-post-form",children:t.jsx("div",{className:"grid grid-cols-12 place-content-start gap-4 sm:gap-5 lg:gap-6",children:t.jsx("div",{className:"col-span-12 lg:col-span-12",children:t.jsx(he,{className:"p-4 sm:px-5 overflow-y-auto max-h-screen",children:t.jsx("div",{className:"mt-5 space-y-5",children:t.jsx(bt,{infos:a,ignorFields:[],fields:p,register:T,control:P,errors:h})})})})})})]})}))}const Yt=dt()==="Safari",Xt="CRM List";function Dt({tabData:e,customer:r}){const{cardSkin:s}=xe(),[l,{open:i,close:u}]=$e(!1),[o,p]=We(),[C,v]=n.useState([]),{data:a}=be({doctype:e==null?void 0:e.doctype}),[S,F]=n.useState({doctype:e==null?void 0:e.doctype,page:1,page_length:10,fields:null,filters:JSON.stringify([[e==null?void 0:e.doctype,e==null?void 0:e.filterName,"=",r]])}),{data:m}=pt(S);n.useEffect(()=>{if(a!=null&&a.fields){const c=a==null?void 0:a.fields.filter(d=>d.in_list_view).map(d=>d.fieldname);F({...S,fields:JSON.stringify([...c,"name"])})}},[a]),n.useEffect(()=>{m!=null&&m.data&&(m==null||m.data.map(c=>{c.details=!0}),v(m==null?void 0:m.data))},[m]);const g=c=>{c&&console.log(c.value),u()},[j,T]=n.useState({enableSorting:!0,enableColumnFilters:!0,enableFullScreen:!1,enableRowDense:!1}),[k,h]=n.useState(""),[P,R]=n.useState([]),[f,w]=ie("column-visibility-orders-2",{}),[M,z]=ie("column-pinning-orders-2",{}),$=n.useRef(),{width:b}=Je({ref:$}),y=Ke({data:C,columns:Ze(a==null?void 0:a.fields.filter(c=>c.in_list_view)),doctype:e==null?void 0:e.doctype,state:{globalFilter:k,sorting:P,columnVisibility:f,columnPinning:M,tableSettings:j},meta:{setTableSettings:T,deleteRow:c=>{p(),v(d=>d.filter(A=>A.order_id!==c.original.order_id))},deleteRows:c=>{p();const d=c.map(A=>A.original.order_id);v(A=>A.filter(X=>!d.includes(X.order_id)))}},filterFns:{fuzzy:ce},enableSorting:j.enableSorting,enableColumnFilters:j.enableColumnFilters,getCoreRowModel:ct(),onGlobalFilterChange:h,getFilteredRowModel:ot(),getFacetedUniqueValues:it(),getFacetedMinMaxValues:at(),globalFilterFn:ce,onSortingChange:R,getSortedRowModel:nt(),getExpandedRowModel:lt(),getRowCanExpand:()=>!0,getPaginationRowModel:st(),onColumnVisibilityChange:w,onColumnPinningChange:z,autoResetPageIndex:o});return Ae(()=>y.resetRowSelection(),[C]),Qe(j.enableFullScreen),t.jsxs(te,{title:Xt,children:[t.jsxs("div",{className:"transition-content",children:[t.jsxs("div",{className:"flex items-center justify-between space-x-4 ",children:[t.jsx("div",{className:"min-w-0",children:t.jsx(Ve,{value:y.getState().globalFilter,onChange:c=>y.setGlobalFilter(c.target.value),prefix:t.jsx(yt,{className:"size-4"}),classNames:{input:"h-8 text-xs ring-primary-500/50 focus:ring-3",root:"shrink-0"},placeholder:"Search ..."})}),t.jsxs(U,{className:"h-8 space-x-1.5 rounded-md px-3 text-xs ",color:"primary",onClick:i,children:[t.jsx(Ye,{className:"size-5"}),t.jsxs("span",{children:["New ",e==null?void 0:e.doctype]})]})]}),t.jsx("div",{className:V("flex flex-col pt-4",j.enableFullScreen&&"fixed inset-0 z-61 h-full w-full bg-white pt-3 dark:bg-dark-900"),children:t.jsxs(he,{className:V("relative mt-3 flex grow flex-col",j.enableFullScreen&&"overflow-hidden"),ref:$,children:[t.jsx("div",{className:"table-wrapper min-w-full grow overflow-x-auto",children:t.jsxs(_e,{hoverable:!0,dense:j.enableRowDense,sticky:j.enableFullScreen,className:"w-full text-left rtl:text-right",children:[t.jsx(He,{children:y.getHeaderGroups().map(c=>t.jsx(oe,{children:c.headers.map(d=>t.jsxs(Le,{className:V("bg-gray-200 font-semibold uppercase text-gray-800 dark:bg-dark-800 dark:text-dark-100 first:ltr:rounded-tl-lg last:ltr:rounded-tr-lg first:rtl:rounded-tr-lg last:rtl:rounded-tl-lg",d.column.getCanPin()&&[d.column.getIsPinned()==="left"&&"sticky z-2 ltr:left-0 rtl:right-0",d.column.getIsPinned()==="right"&&"sticky z-2 ltr:right-0 rtl:left-0"]),children:[d.column.getCanSort()?t.jsxs("div",{className:"flex cursor-pointer select-none items-center space-x-3 ",onClick:d.column.getToggleSortingHandler(),children:[t.jsx("span",{className:"flex-1",children:d.isPlaceholder?null:D(d.column.columnDef.header,d.getContext())}),t.jsx(Xe,{sorted:d.column.getIsSorted()})]}):d.isPlaceholder?null:D(d.column.columnDef.header,d.getContext()),d.column.getCanFilter()?t.jsx(De,{column:d.column}):null]},d.id))},c.id))}),t.jsx(Oe,{children:y.getRowModel().rows.map(c=>t.jsxs(n.Fragment,{children:[t.jsx(oe,{className:V("relative border-y border-transparent border-b-gray-200 dark:border-b-dark-500",c.getIsExpanded()&&"border-dashed",c.getIsSelected()&&!Yt&&"row-selected after:pointer-events-none after:absolute after:inset-0 after:z-2 after:h-full after:w-full after:border-3 after:border-transparent after:bg-primary-500/10 ltr:after:border-l-primary-500 rtl:after:border-r-primary-500"),children:c.getVisibleCells().map(d=>t.jsxs(ze,{className:V("relative",s==="shadow-sm"?"dark:bg-dark-700":"dark:bg-dark-900",d.column.getCanPin()&&[d.column.getIsPinned()==="left"&&"sticky z-2 ltr:left-0 rtl:right-0",d.column.getIsPinned()==="right"&&"sticky z-2 ltr:right-0 rtl:left-0"]),children:[d.column.getIsPinned()&&t.jsx("div",{className:V("pointer-events-none absolute inset-0 border-gray-200 dark:border-dark-500",d.column.getIsPinned()==="left"?"ltr:border-r rtl:border-l":"ltr:border-l rtl:border-r")}),D(d.column.columnDef.cell,d.getContext())]},d.id))}),c.getIsExpanded()&&t.jsx("tr",{children:t.jsx("td",{colSpan:c.getVisibleCells().length,className:"p-0",children:t.jsx(et,{row:c,cardWidth:b})})})]},c.id))})]})}),t.jsx(tt,{table:y}),y.getCoreRowModel().rows.length>0&&t.jsx("div",{className:V("px-4 pb-4 sm:px-5 sm:pt-4",j.enableFullScreen&&"bg-gray-50 dark:bg-dark-800",!(y.getIsSomeRowsSelected()||y.getIsAllRowsSelected())&&"pt-4"),children:t.jsx(rt,{table:y,count:(m==null?void 0:m.counts)??0,search:S,setSearch:F})})]})})]}),t.jsx(Ft,{appear:!0,show:l,as:n.Fragment,children:t.jsxs(Ue,{as:"div",className:"relative z-100",onClose:u,children:[t.jsx(ue,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:t.jsx("div",{className:"fixed inset-0 bg-gray-900/50 backdrop-blur-sm transition-opacity dark:bg-black/40"})}),t.jsx(ue,{as:n.Fragment,enter:"ease-out transform-gpu transition-transform duration-200",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"ease-in transform-gpu transition-transform duration-200",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:t.jsx(qe,{className:"fixed right-0 top-0 flex h-full sm:w-[95%] md:w-[600px] transform-gpu flex-col bg-white transition-transform duration-200 dark:bg-dark-700",children:l&&t.jsx(Qt,{onClose:c=>g(c),id:null,rootData:{options:e==null?void 0:e.doctype,title_field:e==null?void 0:e.title_field}})})})]})})]})}const pe="CRM Details",ge=[{id:0,title:"Opportunity",doctype:"Opportunity",filterName:"customer_name",icon:me},{id:1,title:"Quotation",doctype:"Quotation",filterName:"customer_name",icon:me},{id:2,title:"Sales Order",doctype:"Sales Order",filterName:"customer",icon:fe},{id:3,title:"Project",doctype:"Project",filterName:"customer",icon:fe}];function Fr(){const{id:e}=Be(),r=Ge(),[s,l]=n.useState(0);return t.jsx(te,{title:pe,children:t.jsxs("div",{className:"transition-content px-(--margin-x) pb-6",children:[t.jsxs("div",{className:"flex flex-col items-center justify-between space-y-4 py-5 sm:flex-row sm:space-y-0 lg:py-3",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Zt,{className:"size-6"}),t.jsx("h2",{className:"line-clamp-1 text-xl font-medium text-gray-700 dark:text-dark-50",children:pe})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx(U,{className:"min-w-[7rem]",variant:"outlined",color:"error",onClick:()=>r(-1),children:"Back"})})]}),t.jsxs(Ce,{selectedIndex:s,onChange:l,children:[t.jsx("div",{className:"hide-scrollbar overflow-x-auto",children:t.jsx("div",{className:"w-max min-w-full border-b-2 border-gray-150 dark:border-dark-500",children:t.jsx(ke,{className:"-mb-0.5 flex",children:ge.map(i=>t.jsxs(Kt,{className:({selected:u})=>V("shrink-0 space-x-2 whitespace-nowrap border-b-2 px-3 py-2 font-medium ",u?"border-primary-600 text-primary-600 dark:border-primary-500 dark:text-primary-400":"border-transparent hover:text-gray-800 focus:text-gray-800 dark:hover:text-dark-100 dark:focus:text-dark-100"),as:U,unstyled:!0,children:[t.jsx(i.icon,{className:"size-4.5"}),t.jsx("span",{children:i.title})]},i.id))})})}),t.jsx(Fe,{className:"mt-3",children:ge.map(i=>t.jsx(Pe,{children:s===i.id&&t.jsx(Dt,{tabData:i,customer:e})},i.id))})]})]})})}export{Fr as default};
